Scripts:
  Help:
    Script:
    - '@PLAYER Opened Mob Towns Help.'
    - '@PLAYER &4 UNDER CONSTRUCTION'
    - '@PLAYER Closed Mob Towns Help.'
  Spawn:
    Script:
    - '@SETINT <random1to:250>'
    - '@SETSTR $<var:$HardWorld.<playername>SMTeam>.RandomMTSpawn <relativeloc:$HardWorld.<playername>CommandBlockLoc:0,1,0>'
# This is where monster attack and monster town events will live.
  CreateTown:
    Script:
    # Have to add code to ConstructionYard for populating all the $Building.ID and $Building.1Loc so the check for distance works on this script. It is added to Script but test server has not been populated with locations.
    - '@SETSTR $HardWorld.<playername>MELocOrigin <currentloc:<playername>>'
#    - '@CMDOP setwarp <playername>MELocOrigin'
    - '@SETSTR $HardWorld.<playername>MELocCheckTMP DEL'
    - '@SETINT $HardWorld.<playername>MESTOPWHILE 0'
    - '@WHILE s $HardWorld.<playername>MELocCheckTMP != Passed'
#       This is here just to make if the script breaks we are not in a forever while loop
    - ' @IF s $HardWorld.<playername>MELocCheckTMP != Passed'
#    - ' @SETSTR $HardWorld.<playername>MELocCheckTMP DEL'
    - ' @SETSTR $HardWorld.<playername>MEFindLandRan DEL'
    - ' @SETSTR $HardWorld.<playername>MELoc DEL'
    - ' @SETSTR $HardWorld.<playername>MELocTMP DEL'
    - ' @SETINT $HardWorld.<playername>MEStep 0'
    - ' @SETINT $HardWorld.<playername>MEStepsRan 0'
    - ' @SETSTR $HardWorld.<playername>MEBlockTMP DEL'
    - ' @ADDINT $HardWorld.<playername>MESTOPWHILE 1'
    - ' @IF i $HardWorld.<playername>MESTOPWHILE >= 50'
    - '@PLAYER &8LOG While script bugged out needs to exit.'
#    - '     @CALL MobTowns:DOE'
    - '     @EXIT'
    - ' @ENDIF'
    - ' @SETINT $HardWorld.<playername>MERandomSpawnIntX <random1to:250>'
    - ' @ADDINT $HardWorld.<playername>MERandomSpawnIntX 25'
    - ' @SETINT $HardWorld.<playername>MERandomSpawnIntY 70'
    - ' @SETINT $HardWorld.<playername>MERandomSpawnIntZ <random1to:250>'
    - ' @ADDINT $HardWorld.<playername>MERandomSpawnIntZ 25'
    - ' @SETINT $HardWorld.<playername>MERandomSpawnNegorPosInt <random1to:2>'
    - ' @SETINT $HardWorld.<playername>MERandomSpawnNegorPosInt2 <random1to:2>'
    - ' @IF i $HardWorld.<playername>MERandomSpawnNegorPosInt = 2'
    - '     @SETSTR $HardWorld.<playername>MERandomSpawnNegorPos -'
    - ' @ELSE'
    - '     @DELVAR s $HardWorld.<playername>MERandomSpawnNegorPos'    
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MERandomSpawnNegorPosInt2 = 2'
    - '     @SETSTR $HardWorld.<playername>MERandomSpawnNegorPos2 -'
    - ' @ELSE'
    - '     @DELVAR s $HardWorld.<playername>MERandomSpawnNegorPos2'    
    - ' @ENDIF'
    - ' @SETSTR $HardWorld.<playername>MERandomSpawnX $HardWorld.<playername>MERandomSpawnNegorPos'
    - ' @ADDSTR $HardWorld.<playername>MERandomSpawnX $HardWorld.<playername>MERandomSpawnIntX'
    - ' @SETSTR $HardWorld.<playername>MERandomSpawnY $HardWorld.<playername>MERandomSpawnIntY'
    - ' @SETSTR $HardWorld.<playername>MERandomSpawnZ $HardWorld.<playername>MERandomSpawnNegorPos2'
    - ' @ADDSTR $HardWorld.<playername>MERandomSpawnZ $HardWorld.<playername>MERandomSpawnIntZ'
    - ' @SETSTR $HardWorld.<playername>MELoc <relativeloc:$HardWorld.<playername>MELocOrigin:$HardWorld.<playername>MERandomSpawnIntX,$HardWorld.<playername>MERandomSpawnIntY,$HardWorld.<playername>MERandomSpawnIntZ>'
    # Add world size checker to make sure it doesn't spawn outside the borders
    - ' @SETSTR $HardWorld.<playername>MELocWorldSizeCheckX <relativeloc:<playerloc:x>,0,0:$HardWorld.<playername>MERandomSpawnIntX,$HardWorld.<playername>MERandomSpawnIntY,$HardWorld.<playername>MERandomSpawnIntZ>'
    - ' @IF i <distance:$HardWorld.<playername>MELocWorldSizeCheckX:0,0,0> > $Config.SurvivalWorldXYTotal'
    - '     @SETSTR $HardWorld.<playername>MELocCheckTMP Failed'
    - ' @ENDIF'
    - ' @SETSTR $HardWorld.<playername>MELocWorldSizeCheckZ <relativeloc:0,0,<playerloc:z>:$HardWorld.<playername>MERandomSpawnIntX,$HardWorld.<playername>MERandomSpawnIntY,$HardWorld.<playername>MERandomSpawnIntZ>'
    - ' @IF i <distance:$HardWorld.<playername>MELocWorldSizeCheckZ:0,0,0> > $Config.SurvivalWorldXYTotal'
    - '     @SETSTR $HardWorld.<playername>MELocCheckTMP Failed'
    - ' @ENDIF'
    - ' @IF s $HardWorld.<playername>MELocCheckTMP != Failed'
    - '     @SETSTR $HardWorld.<playername>MELocTMP <relativeloc:$HardWorld.<playername>MELocOrigin:$HardWorld.<playername>MERandomSpawnIntX,$HardWorld.<playername>MERandomSpawnIntY,$HardWorld.<playername>MERandomSpawnIntZ>'
    - '     @SETSTR $HardWorld.<playername>MELocTMP <relativeloc:$HardWorld.<playername>MELocTMP:0,-1,0>'
    - '     @SETSTR $HardWorld.<playername>MEFindLandRan DEL'
    - '     @WHILE s $HardWorld.<playername>MEFindLandRan != True'
    - '         @GETBLOCK $HardWorld.<playername>MEBlockTMP $HardWorld.<playername>MELocTMP'
#    - ' @SETBLOCK 35:14 $HardWorld.<playername>MELocTMP'
#    - ' @PAUSE 0.2'
#    - ' @IF s $HardWorld.<playername>MEBlockTMP != 0:0'
    - '@PLAYER &8LOG Check $HardWorld.<playername>MEStep Loc $HardWorld.<playername>MELocTMP Block $HardWorld.<playername>MEBlockTMP'
#    - ' @ENDIF'
#    - '         @IF s $HardWorld.<playername>MEBlockTMP != 0:0'
    - '         @IF s $HardWorld.<playername>MEBlockTMP = 1:0'
    - '         @OR s $HardWorld.<playername>MEBlockTMP = 2:0'
    - '         @OR s $HardWorld.<playername>MEBlockTMP = 3:0'
    - '         @OR s $HardWorld.<playername>MEBlockTMP = 3:1'
    - '         @OR s $HardWorld.<playername>MEBlockTMP = 9:0'
    - '         @OR s $HardWorld.<playername>MEBlockTMP = 12:0'
    - '         @OR s $HardWorld.<playername>MEBlockTMP = 12:1'
    - '         @OR s $HardWorld.<playername>MEBlockTMP = 13:0'
    - '             @SETSTR $HardWorld.<playername>MELoc $HardWorld.<playername>MELocTMP'
    - '             @SETSTR $HardWorld.<playername>MELocCheckTMP Passed'
    - '             @SETSTR $HardWorld.<playername>MEFindLandRan True'
    - '             @SETSTR $HardWorld.<playername>MELocTMP <relativeloc:$HardWorld.<playername>MELocTMP:0,1,0>'
    - '         @ELSE'
    - '             @ADDINT $HardWorld.<playername>MEStep 1'
    - '             @IF i $HardWorld.<playername>MEStepsRan >= 150'
#    - '     @CALL Shared:MEDOE'
#    - '@PLAYER &8LOG all MEStepsRan No Land found closing script.'
    - '                 @SETSTR $HardWorld.<playername>MELocCheckTMP Failed'
    - '                 @SETSTR $HardWorld.<playername>MEFindLandRan True'
    - '             @ENDIF'
    - '             @SETSTR $HardWorld.<playername>MELocTMP <relativeloc:$HardWorld.<playername>MELocTMP:0,-1,0>'
    - '         @ENDIF'
    - '     @ENDWHILE'
    - '     @IF s $HardWorld.<playername>MELocCheckTMP != Failed'
    - '         @SETSTR $HardWorld.<playername>FlagOtherLoc $HardWorld.<playername>MELoc'
    - '         @CALL Shared:FlagDistanceCheck'
    - '         @IF b $HardWorld.<playername>FlagDistanceFailed = True'
    - '             @SETSTR $HardWorld.<playername>MELocCheckTMP Failed'
    - '         @ELSE'
    - '             @SETBLOCK 137:0 $HardWorld.<playername>MELoc'
    - '             @SETSTR $<playername>.CommandBlockLoc $HardWorld.<playername>MELoc'
    - '             @SETSTR $<playername>.FoundCommandBlock True'
    - '             @SETSTR $HardWorld.<playername>CoordsFixed $<playername>.CommandBlockLoc'
    - '             @CALL Shared:CleanCoordsID'
    - '             @SETSTR $HardWorld.<playername>BuildingID $HardWorld.<playername>CoordsFixed'
    - '             @SETSTR $HardWorld.<playername>CoordsFixed Deleted'
    - '             @SETSTR $HardWorld.<var:$HardWorld.<playername>BuildingID>Category MobTowns'
    - '             @SETSTR $HardWorld.<var:$HardWorld.<playername>BuildingID>Schematic MEGraveYard'
#    - '             @SETSTR $HardWorld.<var:$HardWorld.<playername>BuildingID>Town Mobs'
    - '             @SETSTR $HardWorld.<var:$HardWorld.<playername>BuildingID>Owner Mobs'
    - '             @SETSTR $HardWorld.<var:$HardWorld.<playername>BuildingID>Attacking $<playername>.SMTeam'
    - '             @SETINT $HardWorld.<var:$HardWorld.<playername>BuildingID>Tickets 50'
    - '             @SETINT $HardWorld.<var:$HardWorld.<playername>BuildingID>GrowTimer <secondticks:300>'
    - '             @SETINT $HardWorld.<var:$HardWorld.<playername>BuildingID>Level 1'
    - '             @SETSTR $HardWorld.<var:$HardWorld.<playername>BuildingID>Direction North'
    - '             @SETSTR $HardWorld.<playername>CoordsFixed $<playername>.CommandBlockLoc'
    - '             @CALL Shared:CleanCoords'    
    - '             @SETSTR $HardWorld.<var:$HardWorld.<playername>BuildingID>Location $HardWorld.<playername>CoordsFixed'
    - '             @ADDLIST @HardWorld.MobsBuildingLocs $HardWorld.<var:$HardWorld.<playername>BuildingID>Location'
    - '             @ADDLIST @HardWorld.MobsBuildingIDs $HardWorld.<playername>BuildingID'
    - '@PLAYER &8LOG Mob Town NOTES for DEV.
    ID: $HardWorld.<playername>BuildingID 
    Category: $HardWorld.<var:$HardWorld.<playername>BuildingID>Category
    Schematic: $HardWorld.<var:$HardWorld.<playername>BuildingID>Schematic
    Owner: $HardWorld.<var:$HardWorld.<playername>BuildingID>Owner
    Location: $HardWorld.<var:$HardWorld.<playername>BuildingID>Location
    Attacking: $HardWorld.<var:$HardWorld.<playername>BuildingID>Attacking
    Tickets: $HardWorld.<var:$HardWorld.<playername>BuildingID>Tickets
    GrowTimer: $HardWorld.<var:$HardWorld.<playername>BuildingID>GrowTimer
    Level: $HardWorld.<var:$HardWorld.<playername>BuildingID>Level'
    - '             @CMDCON title <playername> title {text:"Building $HardWorld.<var:$HardWorld.<playername>BuildingID>Category Activated ",color:red}'
    - '             @CMDCON title <playername> subtitle {text:"Destroy it before it attacks you.",color:yellow}'
    - '             @CMDOP npc create dead --trait builder'
    - '             @PAUSE 1'
    - '             @CMDOP npc playerlist'
    - '             @CMDOP builder load MEGraveYard'
    - '             @CMDOP builder timeout 0.5'
    - '             @CMDOP builder origin $HardWorld.<var:$HardWorld.<playername>BuildingID>Location'
    - '             @CMDOP builder supply false'
    - '             @PAUSE 1'
    - '             @CMDOP builder build ignoreair oncomplete:MTComplete'
    - '         @ENDIF'
    - '     @ENDIF'
    - ' @ENDIF'
    - ' @ENDIF'
    - '@ENDWHILE'
#    - '@CALL MobTowns:DOE'
  MobAssault:
    Script:
    #/mm mobs spawn [mob_name]:<level> <amount> <world,x,y,z>
    - '@SETSTR $HardWorld.<playername>FlagLocTMP $HardWorld.<var:$<playername>.SMTeam>FlagSpawn'
    - '@WHILE i $HardWorld.<var:$<playername>.MobTownsBuildingID>Tickets >= 50'
    - ' @SETINT $HardWorld.<playername>MobSpawnNum <random1to:5>'
# All X Locations
    - ' @SETINT $HardWorld.<playername>MobSpawnERelLoc $HardWorld.<var:$<playername>.SMTeam>TownSizeeast'
    - ' @ADDINT $HardWorld.<playername>MobSpawnERelLoc 15'
    - ' @SETINT $HardWorld.<playername>MobSpawnWRelLoc 0'
    - ' @SUBINT $HardWorld.<playername>MobSpawnWRelLoc $HardWorld.<var:$<playername>.SMTeam>TownSizewest'
    - ' @SUBINT $HardWorld.<playername>MobSpawnWRelLoc 15'
# ALL Y Locations
    - ' @SETINT $HardWorld.<playername>MobSpawnSRelLoc $HardWorld.<var:$<playername>.SMTeam>TownSizesouth'
    - ' @ADDINT $HardWorld.<playername>MobSpawnSRelLoc 15'
    - ' @SETINT $HardWorld.<playername>MobSpawnNRelLoc 0'
    - ' @SUBINT $HardWorld.<playername>MobSpawnNRelLoc $HardWorld.<var:$<playername>.SMTeam>TownSizenorth'
    - ' @SUBINT $HardWorld.<playername>MobSpawnNRelLoc 15'
    - ' @SETINT $HardWorld.<playername>MobSpawnRanNum <random1to:4>'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 1'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>FlagLocTMP:$HardWorld.<playername>MobSpawnERelLoc,10,0>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 2'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>FlagLocTMP:$HardWorld.<playername>MobSpawnWRelLoc,10,0>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 3'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>FlagLocTMP:0,10,$HardWorld.<playername>MobSpawnSRelLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 4'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>FlagLocTMP:0,10,$HardWorld.<playername>MobSpawnNRelLoc>'
    - ' @ENDIF'
    - ' @SETINT $HardWorld.<playername>MobSpawnTypeNum <random1to:11>'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 1'
    - '     @CMDCON mm mobs spawn ZombieWarrior <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 2'
    - '     @CMDCON mm mobs spawn SkeletalWarrior <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 3'
    - '     @CMDCON mm mobs spawn ZombieRogue <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 4'
    - '     @CMDCON mm mobs spawn SkeletalRogue <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 5'
    - '     @CMDCON mm mobs spawn ZombieMonk <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 6'
    - '     @CMDCON mm mobs spawn SkeletalMonk <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 7'
    - '     @CMDCON mm mobs spawn GiantBoulderHurler <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 8'
    - '     @CMDCON mm mobs spawn ChargedCreeper <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 9'
    - '     @ADDINT <var:$HardWorld.<playername>MobSpawnNum> <var:$HardWorld.<playername>MobSpawnNum>'
    - '     @CMDCON mm mobs spawn Zombie <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 10'
    - '     @ADDINT <var:$HardWorld.<playername>MobSpawnNum> <var:$HardWorld.<playername>MobSpawnNum>'
    - '     @CMDCON mm mobs spawn Skeleton <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 11'
    - '     @ADDINT <var:$HardWorld.<playername>MobSpawnNum> <var:$HardWorld.<playername>MobSpawnNum>'
    - '     @CMDCON mm mobs spawn Creeper <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @SUBINT $HardWorld.<var:$<playername>.MobTownsBuildingID>Tickets $HardWorld.<playername>MobSpawnNum'
    - ' @PAUSE <random1to:30>'
    - '@ENDWHILE'
    - '@SETBOOL $HardWorld.<var:$<playername>.SMTeam>MobAssaultRunning False'
  TicketCounter:
    Script:
    - '@PLAYER &8LOG Still Under contruction'
  MASpawnPoint:
    Script:
    - '@ADDINT $MASpawnPoint.ID 1'
    - '@SETSTR $HardWorld.<playername>MASpawnType zombie'
    - '@SETINT $HardWorld.<playername>MASpawnCount 5'
    - '@CMDOP ma addspawnpoint $MASpawnPoint.ID $HardWorld.<playername>MASpawnType 5 $HardWorld.<playername>MASpawnCount 0 100 100'
#    - '@CALL MobTowns:DOE'
  TESTCB:
    Script:
    - ' @CMDOP eb location add ME<playername>EBSpawnPoint'
    - ' @CMDOP eb boss spawn InfestedZombie ME<playername>EBSpawnPoint'
    - ' @CMDOP eb boss spawn InfestedSkeleton ME<playername>EBSpawnPoint'
  Event:
    Script:
    #Start the spawning of monsters when they click the ender portal frame using monster apocolypse and epicboss.
#Run distance check script.    
    - '@SETSTR $HardWorld.<playername>CurrentLocation <currentloc:<playername>>'
    - '@SETSTR $HardWorld.<playername>DistanceStartLoc $HardWorld.<playername>CurrentLocation'
    - '@SETINT $HardWorld.<playername>DistanceCheckLimit 20'
    - '@SETINT $HardWorld.<playername>DistanceCheckOOBTimeLimit 4'
    - '@PLAYER You are able to build glass and objects that require glass now. But you must be in your Glassblower to build them. As soon as you walk away or hold shift you will lose your ability
    to make objects that require glass.'
    - '@CALL Shared:DistanceCheck'
  Attack:
    Script:
    - '@IF s $HardWorld.<var:$HardWorld.<playername>BuildingID>Category = MobTowns'
    - '@AND b $HardWorld.<var:$HardWorld.<playername>BuildingID>UnderAttack != True'
    - '@AND b $HardWorld.<var:$<playername>.SMTeam>MobAssaultRunning != True'
    - '@AND i $HardWorld.<var:$HardWorld.<playername>BuildingID>Tickets >= 2'
    - '   @SETBOOL $HardWorld.<var:$HardWorld.<playername>BuildingID>UnderAttack True'
    - '   @PLAYER The attack leader must stay within 50 blocks of the center of the town until the boss has been killed.'
    - '   @PLAYER You are the attack leader. If you die your team will have failed to destroy the mob town.'
    - '   @SETSTR $HardWorld.<playername>MTCBLoc $<playername>.CommandBlockLoc'
    - '   @SETINT $HardWorld.<playername>MTStealCount 0'
    - '   @SETINT $HardWorld.<playername>MTStealCountTmp 0'
    - '   @SETSTR $HardWorld.<playername>MTAttackStatus Started'
    - '   @WHILE s $HardWorld.<playername>MTAttackStatus = Started'
    - '     @FLAMES 3 <currentloc:<playername>>'
    - '     @PAUSE 5'
    - '     @SETSTR $HardWorld.<playername>MTCurLocTMP <currentloc:<playername>>'
    - '     @IF i <distance:$HardWorld.<playername>MTCurLocTMP:$HardWorld.<playername>MTCBLoc> >= 51'
    - '       @ADDINT $HardWorld.<playername>DistanceCheckOOB 5'
    - '       @PLAYER You are to far away please move closer. Current Distance <distance:$HardWorld.<playername>MTCurLocTMP:$HardWorld.<playername>MTCBLoc> of the allowed 50 .
    Current time out of bounds $HardWorld.<playername>DistanceCheckOOB out of the allowed 10'
    - '       @IF i $HardWorld.<playername>DistanceCheckOOB >= 10'
    - '@PLAYER &8LOG Script Exit Due to Distance <distance:$HardWorld.<playername>MTCurLocTMP:$HardWorld.<playername>MTCBLoc> is greater then 51'
    - '         @PLAYER &4Team $<playername>.SMTeam failed to destroy the mob town.&r'
    - '         @SETBOOL $HardWorld.<var:$HardWorld.<playername>BuildingID>UnderAttack False'
    - '         @SETINT $HardWorld.<playername>DistanceCheckOOB 0'
    - '         @SETSTR $HardWorld.<playername>MTAttackStatus OOBFailed'
    - '         @EXIT'
    - '       @ENDIF'
    - '     @ELSE'
    - '       @SETINT $HardWorld.<playername>DistanceCheckOOB 0'
    - '     @ENDIF'
    - '     @IF i $HardWorld.<var:$HardWorld.<playername>BuildingID>Tickets >= 2'
    - '     @AND b $HardWorld.<var:$HardWorld.<playername>BuildingID>MobDefenseRunning != True'
    - '       @SETBOOL $HardWorld.<var:$HardWorld.<playername>BuildingID>MobDefenseRunning True'
    - '       @SETSTR $<playername>.MobTownsBuildingID $HardWorld.<playername>BuildingID'
    - '       @CMDOP vt run MobTowns:MobDefense'
    - '     @ENDIF'
    - '   @ENDWHILE'
    - '@ELSE'
    - ' @IF b $HardWorld.<var:$HardWorld.<playername>BuildingID>UnderAttack = True'
    - '   @PLAYER Unable to attack mob town. It is already under attack by someone else.'
    - ' @ENDIF'
    - ' @IF b $HardWorld.<var:$<playername>.SMTeam>MobAssaultRunning = True'
    - '   @PLAYER Unable to attack mob town. Your team is already under assault.'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<var:$HardWorld.<playername>BuildingID>Tickets <= 1'
    - ' @AND b $HardWorld.<var:$HardWorld.<playername>BuildingID>BossBattleReady = True'
    - '     @CALL MobTowns:BossDefense'
    - ' @ENDIF'
    - '@ENDIF'
  MobDefense:
    Script:
    #/mm mobs spawn [mob_name]:<level> <amount> <world,x,y,z>
    - '@SETSTR $HardWorld.<playername>MTCommandBlockLocTMP $<playername>.CommandBlockLoc'
    - '@WHILE i $HardWorld.<var:$<playername>.MobTownsBuildingID>Tickets >= 2'
    - ' @IF s $HardWorld.<playername>MTAttackStatus = OOBFailed'
    - '     @EXIT'
    - ' @ENDIF'
    - ' @SETINT $HardWorld.<playername>MobSpawnNum <random1to:10>'
# All X Locations
    - ' @SETINT $HardWorld.<playername>MobSpawnERelLoc 5'
    - ' @ADDINT $HardWorld.<playername>MobSpawnERelLoc <random1to:25>'
    - ' @SETINT $HardWorld.<playername>MobSpawnWRelLoc -5'
    - ' @SUBINT $HardWorld.<playername>MobSpawnWRelLoc <random1to:25>'
# ALL Y Locations
    - ' @SETINT $HardWorld.<playername>MobSpawnSRelLoc 5'
    - ' @ADDINT $HardWorld.<playername>MobSpawnSRelLoc <random1to:25>'
    - ' @SETINT $HardWorld.<playername>MobSpawnNRelLoc -5'
    - ' @SUBINT $HardWorld.<playername>MobSpawnNRelLoc <random1to:25>'
    - ' @SETINT $HardWorld.<playername>MobSpawnRanNum <random1to:4>'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 1'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:$HardWorld.<playername>MobSpawnERelLoc,10,0>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 2'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:$HardWorld.<playername>MobSpawnWRelLoc,10,0>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 3'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:0,10,$HardWorld.<playername>MobSpawnSRelLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 4'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:0,10,$HardWorld.<playername>MobSpawnNRelLoc>'
    - ' @ENDIF'
    - ' @SETINT $HardWorld.<playername>MobSpawnTypeNum <random1to:11>'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 1'
    - '     @CMDCON mm mobs spawn ZombieWarrior <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 2'
    - '     @CMDCON mm mobs spawn SkeletalWarrior <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 3'
    - '     @CMDCON mm mobs spawn ZombieRogue <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 4'
    - '     @CMDCON mm mobs spawn SkeletalRogue <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 5'
    - '     @CMDCON mm mobs spawn ZombieMonk <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 6'
    - '     @CMDCON mm mobs spawn SkeletalMonk <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 7'
    - '     @CMDCON mm mobs spawn GiantBoulderHurler <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 8'
    - '     @CMDCON mm mobs spawn ChargedCreeper <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 9'
    - '     @ADDINT <var:$HardWorld.<playername>MobSpawnNum> <var:$HardWorld.<playername>MobSpawnNum>'
    - '     @CMDCON mm mobs spawn Zombie <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 10'
    - '     @ADDINT <var:$HardWorld.<playername>MobSpawnNum> <var:$HardWorld.<playername>MobSpawnNum>'
    - '     @CMDCON mm mobs spawn Skeleton <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @IF i $HardWorld.<playername>MobSpawnTypeNum = 11'
    - '     @ADDINT <var:$HardWorld.<playername>MobSpawnNum> <var:$HardWorld.<playername>MobSpawnNum>'
    - '     @CMDCON mm mobs spawn Creeper <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
    - ' @ENDIF'
    - ' @SUBINT $HardWorld.<var:$<playername>.MobTownsBuildingID>Tickets $HardWorld.<playername>MobSpawnNum'
    - ' @PAUSE <random1to:30>'
    - '@ENDWHILE'
    - '@SETBOOL $HardWorld.<var:$<playername>.MobTownsBuildingID>MobDefenseRunning False'
    - '@SETBOOL $HardWorld.<var:$<playername>.MobTownsBuildingID>BossBattleReady True'
    - '@PLAYER To Summon the Boss, Kill all the Mobs then attack the building again to summon the boss.'
  BossDefense:
    Script:
    - '@SETSTR $HardWorld.<var:$<playername>.SMTeam>MTCommandBlockLocTMP $<playername>.CommandBlockLoc'
    - '@SETSTR $HardWorld.<var:$<playername>.SMTeam>MTBuildingID $HardWorld.<playername>BuildingID'
    - '@SETSTR $HardWorld.<playername>MTCommandBlockLocTMP $<playername>.CommandBlockLoc'
    - '@PLAYER You have disturbed my slumber and now you will pay!'
    - '@PAUSE 2'
    - ' @SETINT $HardWorld.<playername>MobSpawnNum 1'
# All X Locations
    - ' @SETINT $HardWorld.<playername>MobSpawnERelLoc 5'
    - ' @ADDINT $HardWorld.<playername>MobSpawnERelLoc <random1to:5>'
    - ' @SETINT $HardWorld.<playername>MobSpawnWRelLoc -5'
    - ' @SUBINT $HardWorld.<playername>MobSpawnWRelLoc <random1to:5>'
# ALL Y Locations
    - ' @SETINT $HardWorld.<playername>MobSpawnSRelLoc 5'
    - ' @ADDINT $HardWorld.<playername>MobSpawnSRelLoc <random1to:5>'
    - ' @SETINT $HardWorld.<playername>MobSpawnNRelLoc -5'
    - ' @SUBINT $HardWorld.<playername>MobSpawnNRelLoc <random1to:5>'
    - ' @SETINT $HardWorld.<playername>MobSpawnRanNum <random1to:4>'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 1'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:$HardWorld.<playername>MobSpawnERelLoc,10,0>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 2'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:$HardWorld.<playername>MobSpawnWRelLoc,10,0>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 3'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:0,10,$HardWorld.<playername>MobSpawnSRelLoc>'
    - ' @ENDIF'
    - ' @IF i $HardWorld.<playername>MobSpawnRanNum = 4'
    - '     @SETSTR $HardWorld.<playername>MobSpawnLoc <relativeloc:$HardWorld.<playername>MTCommandBlockLocTMP:0,10,$HardWorld.<playername>MobSpawnNRelLoc>'
    - ' @ENDIF'
    - ' @CMDCON mm mobs spawn SkeletalWizard <var:$HardWorld.<playername>MobSpawnNum> HardWorld,<var:$HardWorld.<playername>MobSpawnLoc>'
  BossDefeated:
    Script:
    # Right now if another team who did not start the boss spawn kills this boss it will break things.
    - '@SETBLOCK 46:0 $HardWorld.<var:$<playername>.SMTeam>MTCommandBlockLocTMP'
    - '@SETSTR $HardWorld.<playername>BuildingID $HardWorld.<var:$<playername>.SMTeam>MTBuildingID'
    - '@DELVAR s $HardWorld.<var:$HardWorld.<playername>BuildingID>Category'
    - '@DELVAR s $HardWorld.<var:$HardWorld.<playername>BuildingID>Owner'
    - '@DELVAR i $HardWorld.<var:$HardWorld.<playername>BuildingID>Price'
    - '@DELVAR s $HardWorld.<var:$HardWorld.<playername>BuildingID>Schematic'
    - '@DELVAR i $HardWorld.<var:$HardWorld.<playername>BuildingID>Level'
    - '@DELVAR s $HardWorld.<var:$HardWorld.<playername>BuildingID>Direction'
    - '@DELVAR s $HardWorld.<var:$HardWorld.<playername>BuildingID>Attacking'
    - '@DELVAR i $HardWorld.<var:$HardWorld.<playername>BuildingID>Tickets'
    - '@DELVAR i $HardWorld.<var:$HardWorld.<playername>BuildingID>GrowTimer'
    - '@DELVAR s $HardWorld.<var:$HardWorld.<playername>BuildingID>Location'
    - '@REMLIST @HardWorld.MobsBuildingLocs $HardWorld.<var:$HardWorld.<playername>BuildingID>Location'
    - '@REMLIST @HardWorld.MobsBuildingIDs $HardWorld.<playername>BuildingID'
  DOE:
    Script:
    #Deletes On Exit
    - '@DELVAR s $<playername>.FoundCommandBlock'
    - '@DELVAR s $<playername>.CommandBlockLoc'
    - '@DELVAR s $HardWorld.<playername>MELocOrigin'
    - '@DELVAR s $HardWorld.<playername>MELocCheckTMP'
    - '@DELVAR i $HardWorld.<playername>MERandomSpawnIntX'
    - '@DELVAR i $HardWorld.<playername>MERandomSpawnIntY' 
    - '@DELVAR i $HardWorld.<playername>MERandomSpawnIntZ'
    - '@DELVAR i $HardWorld.<playername>MERandomSpawnNegorPosInt' 
    - '@DELVAR i $HardWorld.<playername>MERandomSpawnNegorPosInt2'
    - '@DELVAR s $HardWorld.<playername>MERandomSpawnNegorPos'
    - '@DELVAR s $HardWorld.<playername>MERandomSpawnNegorPos2'
    - '@DELVAR s $HardWorld.<playername>MERandomSpawnX'
    - '@DELVAR s $HardWorld.<playername>MERandomSpawnY'
    - '@DELVAR s $HardWorld.<playername>MERandomSpawnZ'
    - '@DELVAR s $HardWorld.<playername>MELoc'
    - '@DELVAR i $HardWorld.<playername>MECountTMP'
    - '@DELVAR s $HardWorld.<playername>MEBuildingLocTMP'
    - '@DELVAR i $HardWorld.<playername>MEDistanceTMP'
    - '@DELVAR i $HardWorld.<playername>MESTOPWHILE'
    - '@DELVAR s $HardWorld.<playername>PlaceScriptType'
    