Scripts:
#Command block code
# scoreboard objectives add SHard dummy Score
# scoreboard teams add Green GreenTeam
# scoreboard teams join Green @p
# scoreboard players add natersteen SHard 10
# scoreboard objectives remove SHard
# scoreboard objectives setdisplay sidebar SHard
# scoreboard teams option Green color Green
# testfor @a[score_SHard_min=100]
# say @a[score_SHard_min=100] is the winner!
# scoreboard objectives remove SHard
#
#How to count up team scores.
# testfor @p[team=Blue]
# testfor @p[score_SHard_min=10]
# vtrigger ScoreConvert @p
# 
  HealthCheck:
    Script:
    - '@PLAYER <health:>'
#  TeamSelectionAnnounce:
#    Script:
#    - '@IF s <playername> = $HardWorld.GameMaster'
#    - ' @IF b $HardWorld.GameMasterGameDrop = True'
#    - '   @PLAYER You have already started a game. Selecting this again opens up team selection. Closing the Pit.'
#    - '   @SETSTR $SSCGMMasterDrop.Set False'
#    - '   @SETBLOCK $SSCGMMasterDrop.BlockID $SSCGMMasterDrop.BlockLoc'
#    - '   @SETBOOL $HardWorld.GameMasterGameDrop False'
#    - ' @ENDIF'
#    - ' @BROADCAST It is time to decide your teams. 
#    Walk over the pressure plate under each color to set your team to that color.'
#    - ' @SETBOOL $HardWorld.GameMasterGameDropAn True'
#    - ' @PLAYER GameMaster now go and press the button on the wall that says Team Selection Ended.'
#    - '@ELSE'
#    - ' @PLAYER This is for the use of the GameMaster $HardWorld.GameMaster only.'
#    - '@ENDIF'
#  GameDropAnnounce:
#    Script:
#    - '@IF s <playername> = $HardWorld.GameMaster'
#    - '@AND b $HardWorld.GameMasterGameDropAn = True'
#    - ' @BROADCAST Team Selection Ended, 
#    Each team will send one man through the spawn first, he will be the flag bearer.
#    Once the flag has been planted the rest of the players can go through. 
#    Pick your flag bearer now and send him to the pit.'
#    - ' @SETBOOL $HardWorld.GameMasterGameDrop True'
#    - ' @BROADCAST Let the games begin!'
#    - ' @PLAYER GameMaster now go and stand on the pressure plate near the pit'
#    - '@ELSE'
#    - ' @PLAYER This is for the use of the GameMaster $HardWorld.GameMaster only.'
#    - '@ENDIF'
#  GameMasterDrop:
#    Script:
#    - '@IF s <playername> = $HardWorld.GameMaster'
#    - '@AND b $HardWorld.GameMasterGameDrop = True'
#    - ' @CMDCON runalias /placeblock Traps:PlaceBlock <playername> 0 0:0 SSCGMMasterDrop 1,-1,-1'
#    - '@ELSE'
#    - ' @PLAYER This is for the use of the GameMaster $HardWorld.GameMaster only.'
#    - '@ENDIF'
  VictoryConditionAnnounce:
    Script:
    - '@CMDCON title @a title {text:"Current Game Settings",color:red}'
    - '@CMDCON title @a subtitle {text:"Worldsize:<var:$Setup.SurvivalWorldSize>|Victory Points Limit:<var:$Setup.SurvivalWorldVictoryPointsTotal>|FriendlyFire:<var:$Setup.SurvivalFF>|Diff: <var:$Setup.SurvivalWorldDiff>",color:yellow}'
    - '@BROADCAST Worldsize = $Setup.SurvivalWorldSize'
    - '@BROADCAST FriendlyFire = $Setup.SurvivalFF'
    - '@BROADCAST Difficulty = $Setup.SurvivalWorldDiff'
    - '@BROADCAST Victory Condition = $Setup.SurvivalWorldVictoryPointsTotal Points'
    - '@BROADCAST Objective:
    Each team will kill monsters and bosses to gain points.
    Deaths = -5 points,
    Take opposing team flag = 50 points,
    Lose flag = -50 points.
    First team to $Setup.SurvivalWorldVictoryPointsTotal points wins!'
  JoinTeam:
    Script:
    - '@IF b $HardWorld.<var:$<playername>.TeamSelection>TeamCreated != True'
    - ' @CMDCON scoreboard teams add $<playername>.TeamSelection <var:$<playername>.TeamSelection>Team'
    - ' @IF s $<playername>.TeamSelection = Purple'
    - '   @CMDCON scoreboard teams option Purple color dark_purple'
    - ' @ELSE'
    - '   @IF s $<playername>.TeamSelection = Magenta'
    - '     @CMDCON scoreboard teams option Magenta color light_purple'
    - '   @ELSE'
    - '     @CMDCON scoreboard teams option $<playername>.TeamSelection color $<playername>.TeamSelection'
    - '   @ENDIF'
    - ' @ENDIF'
    - ' @SETBOOL $HardWorld.<var:$<playername>.TeamSelection>TeamCreated True'
    - ' @SETSTR $HardWorld.<var:$<playername>.TeamSelection>TeamLeader <playername>'
    - ' @PLAYER You are the team leader for the $<playername>.TeamSelection team.'
    - ' @PAUSE 0.5'
    - '@ENDIF'
    - '@CALL NewGame:JoinTeamAccept'
  JoinTeamAccept:
    Script:
    - '@CLOSEINV <playername>'
    - '@IF s $HardWorld.<var:$<playername>.TeamSelection>TeamLeader = <playername>'
    - '@OR s $<playername>.InviteAccept = $<playername>.TeamSelection'
    - ' @DELVAR s $<playername>.InviteAccept'
    - ' @IF s $<playername>.TeamSelection = Purple'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:10'
    - '   @SETSTR $HardWorld.<playername>ColorCode &5'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Green'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:13'
    - '   @SETSTR $HardWorld.<playername>ColorCode &a'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Red'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:14'
    - '   @SETSTR $HardWorld.<playername>ColorCode &4'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Black'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:15'
    - '   @SETSTR $HardWorld.<playername>ColorCode &0'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Blue'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:11'
    - '   @SETSTR $HardWorld.<playername>ColorCode &9'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Magenta'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:2'
    - '   @SETSTR $HardWorld.<playername>ColorCode &d'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Yellow'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:4'
    - '   @SETSTR $HardWorld.<playername>ColorCode &e'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Gray'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:7'
    - '   @SETSTR $HardWorld.<playername>ColorCode &7'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = White'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:0'
    - '   @SETSTR $HardWorld.<playername>ColorCode &f'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Dark_Blue'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:11'
    - '   @SETSTR $HardWorld.<playername>ColorCode &1'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Dark_Green'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:13'
    - '   @SETSTR $HardWorld.<playername>ColorCode &2'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Aqua'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:9'
    - '   @SETSTR $HardWorld.<playername>ColorCode &b'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Dark_Aqua'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:9'
    - '   @SETSTR $HardWorld.<playername>ColorCode &3'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Dark_Red'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:14'
    - '   @SETSTR $HardWorld.<playername>ColorCode &4'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Gold'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:4'
    - '   @SETSTR $HardWorld.<playername>ColorCode &6'
    - ' @ENDIF'
    - ' @IF s $<playername>.TeamSelection = Dark_Gray'
    - '   @SETSTR $HardWorld.<playername>FlagColorBlockID 35:7'
    - '   @SETSTR $HardWorld.<playername>ColorCode &7'
    - ' @ENDIF'
    - ' @SETSTR $HardWorld.<var:$<playername>.TeamSelection>FlagColorFirework $<playername>.TeamSelection'
    - ' @SETBOOL $HardWorld.<playername>TeamPicked True'
    - ' @CMDCON scoreboard teams join $<playername>.TeamSelection <playername>'
    - ' @ADDLIST @HardWorld.<var:$<playername>.TeamSelection>PlayersList <playername>'
    - ' @SETSTR $<playername>.SMTeam $<playername>.TeamSelection'
    - ' @SETBOOL $HardWorld.<playername>OnTeam True'
    - ' @PAUSE 0.5'
    - ' @CMDCON scoreboard players add <playername> LHard 1'
    - ' @CMDCON scoreboard players add <var:$<playername>.SMTeam>Total SHard 1'
    - ' @CMDCON scoreboard players remove <playername> LHard 1'
    - ' @CMDCON scoreboard players remove <var:$<playername>.SMTeam>Total SHard 1'
    - ' @CMDCON title <playername> title {text:"Joined <var:$<playername>.TeamSelection> Team",color:red}'
    - ' @CMDCON title <playername> subtitle {text:"Type /mi and select Join Game to start.",color:yellow}'  
    - ' @PLAYER You have joined Team $<playername>.TeamSelection type /mi and select Join Game to start.'
    - '@ELSE'
    - ' @SETINT $<playername>.PlayersListCountTmp 0'
    # Send message to every player on a team.
    - ' @LOOP @HardWorld.<var:$<playername>.TeamSelection>PlayersList'
    - '   @SETSTR $<playername>.PlayersListStr @HardWorld.<var:$<playername>.TeamSelection>PlayersList[<var:$<playername>.PlayersListCountTmp>]'
    - '   @CMDOP mail send $<playername>.PlayersListStr <playername> has requested to join your team. Type (/miaccept <playername>) to accept their request.'
    - '   @CMDCON msg $<playername>.PlayersListStr <playername> has requested to join your team.'
    - '   @CMDCON msg $<playername>.PlayersListStr Type (/miaccept <playername>) to accept their request.'
    - '   @CMDCON title $<playername>.PlayersListStr title {text:"Request From <playername>",color:red}'
    - '   @CMDCON title $<playername>.PlayersListStr subtitle {text:"Type (/miaccept <playername>) to add them to your team.",color:yellow}'
    - '   @ADDINT $<playername>.PlayersListCountTmp 1'
    - ' @ENDLOOP'
    - ' @CMDCON title <playername> title {text:"Team Join Request Sent",color:red}'
    - ' @CMDCON title <playername> subtitle {text:"Wait for <var:$<playername>.TeamSelection> team to accept your request.",color:yellow}'    
    - ' @PLAYER You have requested to Join Team <var:$<playername>.TeamSelection>. Wait for a notification that they have accepted then attempt to join the game or pick another team.'
    - '@ENDIF'
  Setup:
# Set an hour cooldown on the script to prevent overuse
#    Cooldown: 3600
    Script:
#   Setting up the game
# Commandblocks
# vtrigger setstr Setup SurvivalWorldSize Small
# vtrigger setstr Setup SurvivalWorldSize Medium
# vtrigger setstr Setup SurvivalWorldSize Large
#
# vt run NewGame:VictoryConditionAnnounce @a[r=20]
#
# vt run NewGame:Setup @p
    - '@SETSTR $Config.WorldName HardWorld'
    - '@PLAYER Worldname: $Setup.SurvivalWorldSize'
    - '@IF b $Setup.Active != true'
    - '@AND s $HardWorld.GameMaster = <playername>'
    - ' @CLOSEINV <playername>'
    - ' @CMDCON scoreboard objectives add SHard dummy Score'
    - ' @CMDCON scoreboard objectives add LHard dummy Score'
    - ' @PAUSE 0.5'
    - ' @CMDCON scoreboard objectives setdisplay sidebar SHard'
    - ' @CMDCON scoreboard objectives setdisplay list LHard'
    - ' @CALL Flag:Setup'
    - ' @SETSTR $Config.CurrencyType Emerald'
    - ' @CALL NewGame:ITEMID'
    - ' @ADDLIST @HardWorld.TeamList Purple'
    - ' @ADDLIST @HardWorld.TeamList Green'
    - ' @ADDLIST @HardWorld.TeamList Red'
    - ' @ADDLIST @HardWorld.TeamList Black'
    - ' @ADDLIST @HardWorld.TeamList Blue'
    - ' @ADDLIST @HardWorld.TeamList Magenta'
    - ' @ADDLIST @HardWorld.TeamList Yellow'
    - ' @ADDLIST @HardWorld.TeamList Gray'
    - ' @ADDLIST @HardWorld.TeamList White'
    - ' @ADDLIST @HardWorld.TeamList Dark_Blue'
    - ' @ADDLIST @HardWorld.TeamList Dark_Green'
    - ' @ADDLIST @HardWorld.TeamList Dark_Aqua'
    - ' @ADDLIST @HardWorld.TeamList Dark_Red'
    - ' @ADDLIST @HardWorld.TeamList Gold'
    - ' @ADDLIST @HardWorld.TeamList Dark_Gray'
    - ' @ADDLIST @HardWorld.TeamList Aqua'
    - ' @SETINT $HardWorld.TeamListCountTmp 0'
    # Turn friendly fire off and make a permission group for all teams.
    - ' @LOOP @HardWorld.TeamList'
    - '   @SETSTR $HardWorld.TeamListStr @HardWorld.TeamList[<var:$HardWorld.TeamListCountTmp>]'
    - '   @IF s $Setup.SurvivalFF = true'
    - '     @CMDCON scoreboard teams option $HardWorld.TeamListStr friendlyfire true'
    - '   @ELSE'
    - '     @CMDCON scoreboard teams option $HardWorld.TeamListStr friendlyfire false'
    - '   @ENDIF'
    - '   @CMDCON mangadd $HardWorld.TeamListStr'
    - '   @ADDINT $HardWorld.TeamListCountTmp 1'
    - ' @ENDLOOP'
    - ' @IF s $Setup.SurvivalWorldSize = Small'
#    - '   @CMDCON wb <var:$Config.WorldName> set 250 250 0 0'
#    - '   @CMDCON wb <var:$Config.WorldName>_nether set 30 250 0 0'
    - '   @SETINT $Config.SurvivalWorldXYTotal 250'
    - '   @BROADCAST The small survival world has been built successfully!'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldSize = Medium'
#    - '   @CMDCON wb <var:$Config.WorldName> set 500 500 0 0'
#    - '   @CMDCON wb <var:$Config.WorldName>_nether set 62 500 0 0'
    - '   @SETINT $Config.SurvivalWorldXYTotal 500'
    - '   @BROADCAST The medium survival world has been built successfully!'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldSize = Large'
#    - '   @CMDCON wb <var:$Config.WorldName> set 2000 2000 0 0'
#    - '   @CMDCON wb <var:$Config.WorldName>_nether set 250 2000 0 0'
    - '   @SETINT $Config.SurvivalWorldXYTotal 2000'
    - '   @BROADCAST The large survival world has been built successfully!'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldDiff = Easy'
    - '   @CMDCON mslimit -s -w HardWorld -t monster -l 25'
    - '   @CMDCON mslimit -s -w HardWorld_nether -t monster -l 25'
    - '   @CMDCON mslimit -s -w HardWorld_the_end -t monster -l 25'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldDiff = Medium'
    - '   @CMDCON mslimit -s -w HardWorld -t monster -l 50'
    - '   @CMDCON mslimit -s -w HardWorld_nether -t monster -l 50'
    - '   @CMDCON mslimit -s -w HardWorld_the_end -t monster -l 50'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldDiff = Hard'
    - '   @CMDCON mslimit -s -w HardWorld -t monster -l 100'
    - '   @CMDCON mslimit -s -w HardWorld_nether -t monster -l 100'
    - '   @CMDCON mslimit -s -w HardWorld_the_end -t monster -l 100'
    - ' @ENDIF'
#    - ' @CMDOP wb HardWorld fill 20 208'
#    - ' @PAUSE 0.5'
#    - ' @CMDOP wb fill confirm'
    - ' @SETBOOL $Setup.Active true'
    - ' @BROADCAST Team Selection Started, 
    The first person to submit their team colour for each colour will be the flag bearer.
    Once the flag has been planted the rest of the players can select to spawn. 
    Pick your team colour now and be ready to spawn!'
    - ' @BROADCAST Let the games begin!'
    - '@LOOP 3'
    - ' @CMDCON title @a title {text:"Team Selection Started",color:red}'
    - ' @CMDCON title @a subtitle {text:"Type /mi to start your adventure",color:yellow}'
    - ' @BROADCAST Team Selection Started: Type /mi to start your adventure'
    - ' @PAUSE 5'
    - '@ENDLOOP'
#   If Game is Active or not
    - '@ELSE'
    - ' @PLAYER You are not a Game Master or there already is a game in progress. Cannot setup a new victory condition until other game is forefiet or completed.'
    - '@ENDIF'
  RandomSpawn:
# vt run NewGame:RandomSpawn @p
    Cooldown: 10
    Script:
    - '@PLAYER &8LOG 1 My Name is <playername> and my team is $<playername>.SMTeam and TeamSpawnSet is $<var:$<playername>.SMTeam>.TeamSpawnSet'
    - '@IF b $HardWorld.<playername>TeamPicked = True'
    - '@IF b $<var:$<playername>.SMTeam>.TeamSpawned = true'
    - '@PLAYER &8LOG 2 My Name is <playername> and my team is <var:$<playername>.SMTeam> and TeamSpawnSet is $<var:$<playername>.SMTeam>.TeamSpawnSet'
    - ' @IF s $<var:$<playername>.SMTeam>.TeamSpawnSet = true'
#    - '   @PLAYER Sending you to your teams spawn location of $<var:$<playername>.SMTeam>.RandomSpawnX $<var:$<playername>.SMTeam>.RandomSpawnY $<var:$<playername>.SMTeam>.RandomSpawnZ'
    - '   @PLAYER Sending you to your teams spawn location of $<worldname>.<var:$<playername>.SMTeam>FlagSpawn'
#    - '   @CMDCON mv tp <playername> $Config.WorldName'
    - '   @CMDOP warp <var:$<playername>.SMTeam>Flag'
    - '   @PAUSE 2'
    - '   @IF b $<var:$Config.WorldName>.<playername>SMSpawned != True'
    - '     @CMDOP vt run Shared:Clear'
    - '     @CMDCON manselect $Config.WorldName'
    - '     @PAUSE 0.5'
    - '     @CMDCON manuaddsub <playername> $<playername>.SMTeam'
    - '     @CMDOP region addowner $<playername>.SMTeam <playername>'
    - '     @SETBOOL $<var:$Config.WorldName>.<playername>SMSpawned True'
    - '   @ENDIF'
    - '   @PAUSE 1'
    - '   @CMDCON effect <playername> 11 10 5'
    - '   @CMDCON effect <playername> 4 10 5'
    - '   @CMDCON effect <playername> 18 10 5'
    - '   @CMDCON effect <playername> 13 10 5'
    - '   @CMDCON effect <playername> 1 10 2'
    - '   @PAUSE 2'
#    - '   @CMDOP townyadmin town $<playername>.SMTeam add <playername>'
#    - '   @CMDCON vt run NewGame:Tp <playername>'
#    - '   @CMDCON vt run NewGame:TpFlag <playername>'
#    - '   @PAUSE 5'
#    - '   @SETSTR $<playername>.SMTeamBackup $<playername>.SMTeam'
    - '   @CMDOP spawnpoint <playername>'
    - ' @ELSE'
    - '   @PLAYER The first player in needs to find a valid spawn location and create the team flag before you can spawn.'
    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER Welcome to $Config.WorldName. You will now set the spawn for $<playername>.SMTeam flag'
    - ' @SETBOOL $<var:$<playername>.SMTeam>.TeamSpawned true'
    - ' @CMDCON scoreboard players set <var:$<playername>.SMTeam>Total SHard 0'
    - ' @CMDCON scoreboard teams join <var:$<playername>.SMTeam> <var:$<playername>.SMTeam>Total'
    - ' @IF s $Setup.SurvivalWorldSize = Small'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntX <random1to:250>'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntZ <random1to:250>'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldSize = Medium'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntX <random1to:500>'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntZ <random1to:500>'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldSize = Large'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntX <random1to:2000>'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntZ <random1to:2000>'
    - ' @ENDIF'
    - ' @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntY 250'
    - ' @SETINT $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt <random1to:2>'
    - ' @SETINT $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt2 <random1to:2>'
    - ' @IF i $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt = 2'
    - '   @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnX -'
    - '   @ADDSTR $<var:$<playername>.SMTeam>.RandomSpawnX $<var:$<playername>.SMTeam>.RandomSpawnIntX'
    - ' @ELSE'
    - '   @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnX $<var:$<playername>.SMTeam>.RandomSpawnIntX'
    - ' @ENDIF'
    - ' @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnY $<var:$<playername>.SMTeam>.RandomSpawnIntY'
    - ' @IF i $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt2 = 2'
    - '   @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnZ -'
    - '   @ADDSTR $<var:$<playername>.SMTeam>.RandomSpawnZ $<var:$<playername>.SMTeam>.RandomSpawnIntZ'
    - ' @ELSE'
    - '   @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnZ $<var:$<playername>.SMTeam>.RandomSpawnIntZ'
    - ' @ENDIF'
    - '@PLAYER &8LOG Test $<playername>.RandomSpawnNegorPosInt $<playername>.RandomSpawnNegorPosInt2 $<playername>.RandomSpawnX $<playername>.RandomSpawnY $<playername>.RandomSpawnZ'
    - ' @CMDCON mv tp <playername> $Config.WorldName'
    - ' @PAUSE 2'
    - ' @OPENINV LOADING'
    - ' @IF b $<var:$Config.WorldName>.<playername>SMSpawned != True'
    - '   @CMDOP vt run Shared:Clear'
    # Setup Default Permissions for Team
    - '   @CMDCON manselect $Config.WorldName'
    - '   @PAUSE 0.5'
    - '   @CMDCON mangadd $<playername>.SMTeam'
    - '   @PAUSE 0.5'
    - '   @IF s $HardWorld.GameMaster = <playername>' 
    - '     @IF s $Setup.SurvivalWorldSize = Small'
    - '       @CMDOP worldborder set 550'
    - '     @ENDIF'
    - '     @IF s $Setup.SurvivalWorldSize = Medium'
    - '       @CMDOP worldborder set 1050'
    - '     @ENDIF'
    - '     @IF s $Setup.SurvivalWorldSize = Large'
    - '       @CMDOP worldborder set 4050'
    - '     @ENDIF'
    - '   @ENDIF'
    - '   @CMDCON manuaddsub <playername> $<playername>.SMTeam'
    - '   @CMDCON manuaddsub $<playername>.SMTeam $<playername>.SMTeam'
    - '   @PAUSE 0.5'
    - '   @CMDCON mangaddp $<playername>.SMTeam citizens.npc.select'
    - '   @CMDCON mangaddp $<playername>.SMTeam citizens.npc.remove'
    - '   @CMDCON mangaddp $<playername>.SMTeam citizens.npc.tphere'
    - '   @CMDCON mangaddp $<playername>.SMTeam builder.cancel'
    - '   @CMDCON mangaddp $<playername>.SMTeam builder.donate'
    - '   @SETBOOL $<var:$Config.WorldName>.<playername>SMSpawned True'
    - ' @ENDIF'
    - ' @PAUSE 1'
    - ' @OPENINV LOADING1'
    - ' @CMDCON effect <playername> 11 10 5'
    - ' @CMDCON effect <playername> 4 10 5'
    - ' @CMDCON effect <playername> 18 10 5'
    - ' @CMDCON effect <playername> 13 10 5'
    - ' @CMDCON effect <playername> 1 10 2'
    - ' @PAUSE 2'
    - ' @OPENINV LOADING2'
    - ' @PAUSE 2'
    - ' @OPENINV LOADING3'
    - ' @IF b $<var:$Config.WorldName>.FirstTimeSetup != True'
    - '   @SETBOOL $<var:$Config.WorldName>.FirstTimeSetup True'
    - '   @CMDOP vt run Tech:Setup'
    - '   @CMDCON time 6am $Config.WorldName'
    - ' @ENDIF'
    - ' @CMDOP vt run NewGame:BiomeCheck <playername>'
    - '@ENDIF'
    - '@ELSE'
    - ' @PLAYER You need to pick a team before you enter the survival challenge. Sending you back to server spawn.'
    - ' @CMDOP warp spawn'
    - '@ENDIF'
  TpFlag:
    Script:
    - '@TP <playername> $<worldname>.<var:$<playername>.SMTeam>FlagSpawn'
  Tp:
    Script:
    - '@CMDCON tp <playername> $<var:$<playername>.SMTeam>.RandomSpawnX $<var:$<playername>.SMTeam>.RandomSpawnY $<var:$<playername>.SMTeam>.RandomSpawnZ'  
  BiomeCheck:
    Script:
    - '@CALL NewGame:Tp'
    - '@CMDCON effect <playername> 11 50 5'
    - '@CMDCON effect <playername> 4 50 5'
    - '@CMDCON effect <playername> 18 50 5'
    - '@CMDCON effect <playername> 13 50 5'
    - '@CMDCON effect <playername> 1 10 2'
    - '@PAUSE 2'
    - '@OPENINV LOADING6'
    - '@PAUSE 2'
    - '@OPENINV LOADING8'
    - '@CMDOP spawnpoint <playername>'
    - '@PAUSE 1'
    - '@CLOSEINV <playername>'
    - '@CMDCON title <playername> title {text:"Find Land For Settling",color:red}'
    - '@CMDCON title <playername> subtitle {text:"type /mi then select settle",color:yellow}'
    - '@PLAYER If your not on land swim to it now! You have 30 seconds before respawn attempt will occur if your not on land by then.'
    - '@PAUSE 25'
    - '@CMDOP vt run NewGame:RunBiomeCheck'
    - '@PAUSE 1'
    - '@WHILE s $<playername>.SMBiomeTest = Fail'
    - ' @ADDINT $<playername>.SMSpawnAttempts 1'
    - ' @IF i $<playername>.SMSpawnAttempts >= 10'
#    - '   @CMDCON mvtp <playername> world'
    - '   @SETBOOL $SurvivalMatch.GameReset True'
    - '   @PLAYER Game Creation FAILED survival match reset and world deleted please recreate the Survival Match world.'
    - '   @SETINT $<playername>.SMSpawnAttempts 0'
    - '   @CALL NewGame:Reset'
    - '   @EXIT'
    - ' @ENDIF'
    - ' @PLAYER You are in biome <biome>. Resetting random spawn until you find land.'
    - ' @IF s $Setup.SurvivalWorldSize = Small'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntX <random1to:250>'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntZ <random1to:250>'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldSize = Medium'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntX <random1to:500>'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntZ <random1to:500>'
    - ' @ENDIF'
    - ' @IF s $Setup.SurvivalWorldSize = Large'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntX <random1to:2000>'
    - '   @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntZ <random1to:2000>'
    - ' @ENDIF'
    - ' @SETINT $<var:$<playername>.SMTeam>.RandomSpawnIntY 250'
    - ' @SETINT $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt <random1to:2>'
    - ' @SETINT $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt2 <random1to:2>'
    - ' @IF i $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt = 2'
    - '     @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnNegorPos -'
    - ' @ELSE'
    - '     @DELVAR s $<var:$<playername>.SMTeam>.RandomSpawnNegorPos'    
    - ' @ENDIF'
    - ' @IF i $<var:$<playername>.SMTeam>.RandomSpawnNegorPosInt2 = 2'
    - '     @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnNegorPos2 -'
    - ' @ELSE'
    - '     @DELVAR s $<var:$<playername>.SMTeam>.RandomSpawnNegorPos2'    
    - ' @ENDIF'
    - ' @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnX $<var:$<playername>.SMTeam>.RandomSpawnNegorPos'
    - ' @ADDSTR $<var:$<playername>.SMTeam>.RandomSpawnX $<var:$<playername>.SMTeam>.RandomSpawnIntX'
    - ' @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnY $<var:$<playername>.SMTeam>.RandomSpawnIntY'
    - ' @SETSTR $<var:$<playername>.SMTeam>.RandomSpawnZ $<var:$<playername>.SMTeam>.RandomSpawnNegorPos2'
    - ' @ADDSTR $<var:$<playername>.SMTeam>.RandomSpawnZ $<var:$<playername>.SMTeam>.RandomSpawnIntZ'
#    - ' @PLAYER Test $<playername>.RandomSpawnNegorPosInt $<playername>.RandomSpawnNegorPosInt2 $<playername>.RandomSpawnX $<playername>.RandomSpawnY $<playername>.RandomSpawnZ'
    - ' @CALL NewGame:Tp'
    - ' @CMDCON effect <playername> 11 50 5'
    - ' @CMDCON effect <playername> 4 50 5'
    - ' @CMDCON effect <playername> 18 50 5'
    - ' @CMDCON effect <playername> 13 50 5'
    - ' @CMDCON effect <playername> 1 50 2'
    - ' @PAUSE 5'
    - ' @CMDOP spawnpoint <playername>'
    - ' @CMDCON title <playername> title {text:"Find Land For Settling",color:red}'
    - ' @CMDCON title <playername> subtitle {text:"type /mi then select settle",color:yellow}'
    - ' @PLAYER If your not on land swim to it now! You have 30 seconds before respawn attempt will occur if your not on land by then.'
    - ' @PAUSE 30'
    - ' @CMDOP vt run NewGame:RunBiomeCheck'
    - ' @PAUSE 1'
    - '@ENDWHILE'
    - '@IF b $SurvivalMatch.GameReset != True'
    - ' @SETINT $<worldname>.<playername>TimerTMP 15'
    - ' @LOOP 15'
    - '   @CMDCON effect <playername> 11 60 5'
    - '   @CMDCON effect <playername> 4 60 5'
    - '   @CMDCON effect <playername> 18 60 5'
    - '   @CMDCON effect <playername> 13 60 5'
    - '   @CMDCON effect <playername> 1 60 2'
    - '   @CMDCON title <playername> title {text:"Make Your Base",color:red}'
    - '   @CMDCON title <playername> subtitle {text:"type /mi then select settle",color:yellow}'
    - '   @PLAYER You now can place your flag by typing &4/mi&r and selecting SETTLE you must do this within $<worldname>.<playername>TimerTMP minutes otherwise the flag will be placed for you.
    During this time you cannot break or build anything.'
    - '   @PAUSE 60'
    - '   @SUBINT $<worldname>.<playername>TimerTMP 1'
    - '   @IF s $<var:$<playername>.SMTeam>.TeamSpawnSet = true'
    - '     @BREAKLOOP'
    - '   @ENDIF'
    - ' @ENDLOOP'
#    - ' @CMDOP vt run Flag:Creation <playername>' 
    - ' @IF s $<var:$<playername>.SMTeam>.TeamSpawnSet != true'
    - '   @PLAYER Time is up placing flag automatically.'
    - '     @CMDOP vt run Flag:Settle <playername>'
    - ' @ENDIF'
    - '@ENDIF'
    - '@SETINT $<playername>.SMSpawnAttempts 0'
  RunBiomeCheck:
    Script:
#    - '@PLAYER &8LOG Biome check you are in <biome>'
    - ' @IF s <biome> = OCEAN'
    - ' @OR s <biome> = DEEP_OCEAN'
#    - '@PLAYER &8LOG Setting BiomeTest to Fail because biome is <biome>'
    - '   @SETSTR $<playername>.SMBiomeTest Fail'
    - ' @ELSE'
#    - '@PLAYER &8LOG Setting BiomeTest to Passed because biome is <biome>'
    - '   @SETSTR $<playername>.SMBiomeTest Passed'
    - ' @ENDIF'
  Reset:
    Script:
    - '@IF s <worldname> = HardWorld'
    - '@PLAYER PLEASE WAIT AND DO NOTHING UNTIL CONFIRMATION THAT ALL RESET SCRIPTS HAVE BEEN COMPLETED!'
    - '@OPENINV LOADING'
    - '@CMDOP region remove Green -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Red -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Black -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Blue -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Purple -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Magenta -w <worldname>'
    - '@PAUSE 0.2'
    - '@OPENINV LOADING1'
    - '@CMDOP region remove Yellow -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Gray -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove White -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Dark_Blue -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Dark_Green -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Dark_Aqua -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Dark_Red -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Gold -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Dark_Gray -w <worldname>'
    - '@PAUSE 0.2'
    - '@CMDOP region remove Aqua -w <worldname>'
    - '@PAUSE 0.2'
    - '@SETINT $<worldname>.TeamListCountTmp 0'
    # Remove all permission groups.
    - '@LOOP @<worldname>.TeamList'
    - ' @SETSTR $<worldname>.TeamListStr @<worldname>.TeamList[<var:$<worldname>.TeamListCountTmp>]'
    - ' @CMDCON mangdel $<worldname>.TeamListStr'
    - ' @ADDINT $<worldname>.TeamListCountTmp 1'
    - '@ENDLOOP'
    - '@DELVAR s $<var:$<playername>.SMTeam>.TeamSpawnSet'
    - '@DELVAR b $<var:$<playername>.SMTeam>.TeamSpawned'
    - '@DELVAR b $SurvivalMatch.GameReset'
    - '@DELVAR s $Setup.SurvivalWorldSize'
    - '@DELVAR s $<playername>.SMTeam'
    - '@DELVAR b $Setup.Active'
    - '@DELVAR s $<playername>.SMBiomeTest'
    - '@DELVAR i $<playername>.SMSpawnAttempts'
    - '@CMDCON scoreboard objectives remove SHard'
    - '@CMDCON scoreboard objectives remove LHard'
    - '@CMDCON scoreboard teams empty Green'
    - '@CMDCON hd delete GreenFlag'
    - '@CMDCON vt delobj Green'
    - '@CMDCON scoreboard teams empty Red'
    - '@CMDCON vt delobj Red'
    - '@CMDCON scoreboard teams empty Black'
    - '@CMDCON vt delobj Black'
    - '@CMDCON scoreboard teams empty Blue'
    - '@CMDCON vt delobj Blue'
    - '@CMDCON scoreboard teams empty Purple'
    - '@CMDCON vt delobj Purple'
    - '@CMDCON scoreboard teams empty Magenta'
    - '@CMDCON vt delobj Magenta'
    - '@CMDCON scoreboard teams empty Yellow'
    - '@CMDCON vt delobj Yellow'
    - '@CMDCON scoreboard teams empty Gray'
    - '@CMDCON vt delobj Gray'
    - '@CMDCON scoreboard teams empty White'
    - '@CMDCON vt delobj White'
    - '@CMDCON scoreboard teams empty Dark_Blue'
    - '@CMDCON vt delobj Dark_Blue'
    - '@CMDCON scoreboard teams empty Dark_Green'
    - '@CMDCON vt delobj Dark_Green'
    - '@CMDCON scoreboard teams empty Dark_Aqua'
    - '@CMDCON vt delobj Dark_Aqua'
    - '@CMDCON scoreboard teams empty Dark_Red'
    - '@CMDCON vt delobj Dark_Red'
    - '@CMDCON scoreboard teams empty Gold'
    - '@CMDCON vt delobj Gold'
    - '@CMDCON scoreboard teams empty Dark_Gray'
    - '@CMDCON vt delobj Dark_Gray'
    - '@CMDCON scoreboard teams empty Aqua'
    - '@CMDCON vt delobj Aqua'
    - '@CMDCON vt delobj SurvivalMatch'
    - '@CMDCON vt delobj HardWorld'
    - '@CMDOP mv purge HardWorld all'
    - '@CMDOP mv tp <playername> world'
    - '@PAUSE 5'
    - '@OPENINV LOADING2'
    - '@CMDOP vt savevars'
    - '@CMDOP vt run NewGame:Reset2'
    - '@ELSE'
    - '@PLAYER You must run this script from HardWorld'
    - '@ENDIF'
  Reset2:
    Script:
    - '@CMDOP mv delete HardWorld'
    - '@CMDOP mvconfirm'
    - '@PAUSE 5'
    - '@OPENINV LOADING3'
    - '@CMDOP mv delete HardWorld_nether'
    - '@CMDOP mvconfirm'
    - '@PAUSE 5'
    - '@OPENINV LOADING4'
    - '@CMDOP mv delete HardWorld_the_end'
    - '@CMDOP mvconfirm'
    - '@PAUSE 5'
    - '@OPENINV LOADING5'
    - '@PLAYER world name is HardWorld'
    - '@CMDOP mv create HardWorld NORMAL'
    - '@PAUSE 5'
    - '@OPENINV LOADING6'
    - '@CMDOP mvm set diff 3 HardWorld'
    - '@CMDOP mvm set mode survival HardWorld'
    - '@CMDOP mvm set memory false HardWorld'
    - '@CMDOP mv create HardWorld_nether NETHER'
    - '@PAUSE 5'
    - '@OPENINV LOADING7'
    - '@CMDOP mvm set diff 3 HardWorld_nether'
    - '@CMDOP mvm set mode survival HardWorld_nether'
    - '@CMDOP mvm set memory false HardWorld_nether'
    - '@CMDOP mv create HardWorld_the_end END'
    - '@PAUSE 5'
    - '@OPENINV LOADING8'
    - '@CMDOP mvm set diff 3 HardWorld_the_end'
    - '@CMDOP mvm set mode survival HardWorld_the_end'
    - '@CMDOP mvm set memory false HardWorld_the_end'
    - '@PAUSE 5'
    - '@CMDOP mm reload'
    - '@PAUSE 1'
#    - '@SETSTR $SSCGMMasterSelect.Set False'
#    - '@SETBLOCK $SSCGMMasterSelect.BlockID $SSCGMMasterSelect.BlockLoc'
#    - '@SETSTR $SSCGMMasterStartGame.Set False'
#    - '@SETBLOCK $SSCGMMasterStartGame.BlockID $SSCGMMasterStartGame.BlockLoc'
#    - '@SETSTR $SSCGMMasterDrop.Set False'
#    - '@SETBLOCK $SSCGMMasterDrop.BlockID $SSCGMMasterDrop.BlockLoc'
    - '@CMDOP vt savevars'
    - '@CLOSEINV <playername>'
    - '@PLAYER RESET SCRIPTS HAVE COMPLETED!'
  ResetTest:
    Script:
    - '@PLAYER Reset Started Set $SSCGMMasterSelect.Set BlockID $SSCGMMasterSelect.BlockID BlockLoc $SSCGMMasterSelect.BlockLoc'
    - '@SETSTR $SSCGMMasterSelect.Set False'
    - '@SETBLOCK $SSCGMMasterSelect.BlockID $SSCGMMasterSelect.BlockLoc'
    - '@SETSTR $SSCGMMasterStartGame.Set False'
    - '@SETBLOCK $SSCGMMasterStartGame.BlockID $SSCGMMasterStartGame.BlockLoc'
    - '@SETSTR $SSCGMMasterDrop.Set False'
    - '@SETBLOCK $SSCGMMasterDrop.BlockID $SSCGMMasterDrop.BlockLoc'
  ITEMID:
    Script:
    - '@SETSTR $ITEMID.OakWood 17:0'
    - '@SETSTR $ITEMID.SpruceWood 17:1'
    - '@SETSTR $ITEMID.BirchWood 17:2'
    - '@SETSTR $ITEMID.JungleWood 17:3'
    - '@SETSTR $ITEMID.AcaciaWood 162:0'
    - '@SETSTR $ITEMID.DarkOakWood 162:1'