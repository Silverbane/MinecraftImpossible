Scripts:
  Help:
    Script:
    - '@PLAYER Opened Barracks Help.'
    - '@PLAYER &4 UNDER CONSTRUCTION'
    - '@PLAYER Closed Barracks Help.'
  SentryControlHelp:
    Script:
    - '@PLAYER Menu Help for Sentry Control. UNDER CONSTRUCTION'
    - '@PLAYER Commands are accesible through the menu but also can be typed. See http://wiki.citizensnpcs.co/Commands and http://wiki.citizensnpcs.co/Sentry#Commands . This is usefull for setting hotkeys instead of using the menu system.'
  Ledger:
    Script:
#    - '@SETSTR $<worldname>.<playername>ActivePlans Barracks'
    - '@SETSTR $<worldname>.<playername>CurrentTown $<playername>.SMTeam'
    - '@ADDINT $<worldname>.<var:$<playername>.SMTeam>PopLimit 6'
    - '@PLAYER &8LOG Calling Shared:BuildingLedger'
    - '@CALL Shared:BuildingLedger'
  Menu:
    Script:
    - '@SETSTR $<worldname>.<playername>CheckType Y-1Check'
    - '@CALL Shared:BuildingID'
    - '@IF b $<worldname>.<playername>NoOwner = True'
    - '@AND b $<worldname>.<var:$<playername>.SMTeam>Building != True'
#    - ' @SETBOOL $<worldname>.<var:$<playername>.SMTeam>Building False' 
#    - ' @SETSTR $<worldname>.<playername>ActivePlans Barracks'
    - ' @SETSTR $<worldname>.<playername>CurrentTown $<playername>.SMTeam'
    - ' @ADDINT $<worldname>.<var:$<playername>.SMTeam>PopLimit 6'
    - ' @CALL Shared:BuildingLedger'
    - '@ENDIF'
    - '@IF b $<worldname>.<playername>AllowedUse = True'
    - ' @PLAYER Opening Barracks Menu'
    - ' @OPENINV Barracks'
    - '@ENDIF'
  IEvent:
    Script:
    - '@IF s <inventorytitle> ?= Barracks'
    - ' @SWITCH i <clickedslot>'
    - '   @CASE 0'
    - '     @CALL Barracks:Help'
    - '   @CASE 1'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>1'
    - '     @IF b $<worldname>.<var:$<playername>.SMTeam>1Built != True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType New'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 1'
    - '         @PLAYER <var:$<playername>.SMTeam> 1 new citizen selected.'
    - '     @ELSE'
    - '       @IF b $<worldname>.<var:$<playername>.SMTeam>1Dead = True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Dead'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 1'
    - '         @PLAYER <var:$<playername>.SMTeam> 1 respawn selected.'
    - '       @ELSE'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Taken'
    - '         @PLAYER <var:$<playername>.SMTeam> 1 slot has already been taken.'
    - '       @ENDIF'
    - '     @ENDIF'
    - '   @CASE 2'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>2'
    - '     @IF b $<worldname>.<var:$<playername>.SMTeam>2Built != True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType New'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 2'
    - '         @PLAYER <var:$<playername>.SMTeam> 2 new citizen selected.'
    - '     @ELSE'
    - '       @IF b $<worldname>.<var:$<playername>.SMTeam>2Dead = True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Dead'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 2'
    - '         @PLAYER <var:$<playername>.SMTeam> 2 respawn selected.'
    - '       @ELSE'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Taken'
    - '         @PLAYER <var:$<playername>.SMTeam> 2 slot has already been taken.'
    - '       @ENDIF'
    - '     @ENDIF'
    - '   @CASE 3'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>3'
    - '     @IF b $<worldname>.<var:$<playername>.SMTeam>3Built != True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType New'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 3'
    - '         @PLAYER <var:$<playername>.SMTeam> 3 new citizen selected.'
    - '     @ELSE'
    - '       @IF b $<worldname>.<var:$<playername>.SMTeam>3Dead = True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Dead'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 3'
    - '         @PLAYER <var:$<playername>.SMTeam> 3 respawn selected.'
    - '       @ELSE'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Taken'
    - '         @PLAYER <var:$<playername>.SMTeam> 3 slot has already been taken.'
    - '       @ENDIF'
    - '     @ENDIF'
    - '   @CASE 4'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>4'
    - '     @IF b $<worldname>.<var:$<playername>.SMTeam>4Built != True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType New'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 4'
    - '         @PLAYER <var:$<playername>.SMTeam> 4 new citizen selected.'
    - '     @ELSE'
    - '       @IF b $<worldname>.<var:$<playername>.SMTeam>4Dead = True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Dead'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 4'
    - '         @PLAYER <var:$<playername>.SMTeam> 4 respawn selected.'
    - '       @ELSE'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Taken'
    - '         @PLAYER <var:$<playername>.SMTeam> 4 slot has already been taken.'
    - '       @ENDIF'
    - '     @ENDIF'
    - '   @CASE 5'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>5'
    - '     @IF b $<worldname>.<var:$<playername>.SMTeam>5Built != True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType New'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 5'
    - '         @PLAYER <var:$<playername>.SMTeam> 5 new citizen selected.'
    - '     @ELSE'
    - '       @IF b $<worldname>.<var:$<playername>.SMTeam>5Dead = True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Dead'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 5'
    - '         @PLAYER <var:$<playername>.SMTeam> 5 respawn selected.'
    - '       @ELSE'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Taken'
    - '         @PLAYER <var:$<playername>.SMTeam> 5 slot has already been taken.'
    - '       @ENDIF'
    - '     @ENDIF'
    - '   @CASE 6'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>6'
    - '     @IF b $<worldname>.<var:$<playername>.SMTeam>6Built != True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType New'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 6'
    - '         @PLAYER <var:$<playername>.SMTeam> 6 new citizen selected.'
    - '     @ELSE'
    - '       @IF b $<worldname>.<var:$<playername>.SMTeam>6Dead = True'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Dead'
    - '         @SETSTR $<worldname>.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $<worldname>.<playername>CitizenTeamID 6'
    - '         @PLAYER <var:$<playername>.SMTeam> 6 respawn selected.'
    - '       @ELSE'
    - '         @SETSTR $<worldname>.<playername>CitizenSelectType Taken'
    - '         @PLAYER <var:$<playername>.SMTeam> 6 slot has already been taken.'
    - '       @ENDIF'
    - '     @ENDIF'
    - '   @CASE 9'
    - '@PLAYER &8LOG Start Case 1 script'
    - '     @CALL Barracks:HireStick'
    - '     @CLOSEINV <playername>'
    - '   @CASE 10'
    - '     @IF i $<worldname>.<playername>BuildingLevel >= 2'
    - '       @CALL Barracks:HireStone'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @CLOSEINV <playername>'
    - '     @ELSE'
    - '       @PLAYER You must upgrade your Barracks to Level 2 before you can recruit this soldier.'
    - '     @ENDIF'
    - '   @CASE 11'
    - '     @IF i $<worldname>.<playername>BuildingLevel >= 3'
    - '       @CALL Barracks:HireIron1'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @CLOSEINV <playername>'
    - '     @ELSE'
    - '       @PLAYER You must upgrade your Barracks to Level 3 before you can recruit this soldier.'
    - '     @ENDIF'
    - '   @CASE 12'
    - '     @IF i $<worldname>.<playername>BuildingLevel >= 4'
    - '       @CALL Barracks:HireIron2'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @CLOSEINV <playername>'
    - '     @ELSE'
    - '       @PLAYER You must upgrade your Barracks to Level 4 before you can recruit this soldier.'
    - '     @ENDIF'
    - '   @CASE 13'
    - '     @IF i $<worldname>.<playername>BuildingLevel >= 5'
    - '       @CALL Barracks:HireDiamond'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @CLOSEINV <playername>'
    - '     @ELSE'
    - '       @PLAYER You must upgrade your Barracks to Level 5 before you can recruit this soldier.'
    - '     @ENDIF'
    - '   @CASE 18'
#    - '     @SETSTR $<worldname>.<playername>TempVarCombine $<worldname>.<var:$<playername>.SMTeam>FletcherLevel'
#    - '     @ADDSTR $<worldname>.<playername>TempVarCombine Level'
    - '@PLAYER &8LOG FletcherLevel= $<worldname>.<var:$<playername>.SMTeam>FletcherLevel'
    - '     @IF i $<worldname>.<playername>BuildingLevel >= 2'
    - '     @AND i $<worldname>.<var:$<playername>.SMTeam>FletcherLevel >= 1'
    - '       @CALL Barracks:HireBow1'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @CLOSEINV <playername>'
    - '     @ELSE'
    - '       @PLAYER You must upgrade your Barracks to Level 2 and Fletcher to Level 1 before you can recruit this bowman.'
    - '     @ENDIF'
    - '   @CASE 19'
#    - '     @SETSTR $<worldname>.<playername>TempVarCombine $<worldname>.<var:$<playername>.SMTeam>FletcherID'
#    - '     @ADDSTR $<worldname>.<playername>TempVarCombine Level'
    - '     @IF i $<worldname>.<playername>BuildingLevel >= 4'
    - '     @AND i $<worldname>.<var:$<playername>.SMTeam>FletcherLevel >= 2'
    - '       @CALL Barracks:HireBow2'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @CLOSEINV <playername>'
    - '     @ELSE'
    - '       @PLAYER You must upgrade your Barracks to Level 4 and Fletcher to Level 2 before you can recruit this bowman.'
    - '     @ENDIF'
    - '   @CASE 20'
#    - '     @SETSTR $<worldname>.<playername>TempVarCombine $<worldname>.<var:$<playername>.SMTeam>FletcherID'
#    - '     @ADDSTR $<worldname>.<playername>TempVarCombine Level'
    - '     @IF i $<worldname>.<playername>BuildingLevel >= 5'
    - '     @AND i $<worldname>.<var:$<playername>.SMTeam>FletcherLevel >= 3'
    - '       @CALL Barracks:HireBow3'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @CLOSEINV <playername>'
    - '     @ELSE'
    - '       @PLAYER You must upgrade your Barracks to Level 5 and Fletcher to Level 3 before you can recruit this bowman.'
    - '     @ENDIF'
    - '   @CASE 25'
    # Add an are you sure system.
    - '     @CLOSEINV <playername>'
    - '     @CALL Shared:DemolishBuilding'
    - '   @CASE 26'
    - '     @PLAYER Upgrade Selected'
    - '     @IF b $<worldname>.<var:$<playername>.SMTeam>Building = True'
    - '       @PLAYER Your team needs to complete their current building first before starting another building project.'
    - '     @ELSE'
    - '       @IF b $<worldname>.<var:$<playername>.SMTeam>ActivateCB = True'
    - '         @CMDCON title <playername> title {text:"ERROR Activate Structure First",color:red}'
    - '         @PLAYER You need to activate a structure first before moving on to building another.'
    - '         @CALL Shared:BuildComplete'
    - '       @ELSE'
    - '       @SETBOOL $<worldname>.<playername>PlanSchematicUpgradable False'
    - '       @IF i $<worldname>.<playername>BuildingLevel = 1'
    - '       @AND b $<worldname>.<var:$<playername>.SMTeam>ArtofWarIIDiscovered = True'
    - '         @SETSTR $<worldname>.<playername>PlanSchematic Barracks2'
    - '         @SETBOOL $<worldname>.<playername>PlanSchematicUpgradable True'
    - '       @ENDIF'
    - '       @IF i $<worldname>.<playername>BuildingLevel = 2'
    - '       @AND b $<worldname>.<var:$<playername>.SMTeam>ArtofWarIIIDiscovered = True'
    - '         @SETSTR $<worldname>.<playername>PlanSchematic Barracks3'
    - '         @SETBOOL $<worldname>.<playername>PlanSchematicUpgradable True'
    - '       @ENDIF'
    - '       @IF i $<worldname>.<playername>BuildingLevel = 3'
    - '       @AND b $<worldname>.<var:$<playername>.SMTeam>ArtofWarIVDiscovered = True'
    - '         @SETSTR $<worldname>.<playername>PlanSchematic Barracks4'
    - '         @SETBOOL $<worldname>.<playername>PlanSchematicUpgradable True'
    - '       @ENDIF'
    - '       @IF i $<worldname>.<playername>BuildingLevel = 4'
    - '       @AND b $<worldname>.<var:$<playername>.SMTeam>ArtofWarVDiscovered = True'
    - '         @SETSTR $<worldname>.<playername>PlanSchematic Barracks5'
    - '         @SETBOOL $<worldname>.<playername>PlanSchematicUpgradable True'
    - '       @ENDIF'
    - '       @IF b $<worldname>.<playername>PlanSchematicUpgradable = True'
    - '         @SETSTR $<worldname>.<playername>PlanSchematicID $<worldname>.<playername>BuildingID'
    # Figure out what direction the player is facing to load correct facing schematic
    - '         @SETSTR $<worldname>.<playername>PlanSchematicDirection $<worldname>.<playername>BuildingDirection'
    - '         @IF s $<worldname>.<playername>PlanSchematicDirection = North'
    # Change the origin based on North facing schematic East +X West -X North -Z South +Z .. Then Y depending on basement or not.
    - '           @SETINT $<worldname>.<playername>PlanLocChangeX 1' 
    - '           @SETINT $<worldname>.<playername>PlanLocChangeY -4'
    - '           @SETINT $<worldname>.<playername>PlanLocChangeZ 1'
    - '         @ENDIF'
    - '         @IF s $<worldname>.<playername>PlanSchematicDirection = East'
    - '           @SETINT $<worldname>.<playername>PlanLocChangeX -2' 
    - '           @SETINT $<worldname>.<playername>PlanLocChangeY -4'
    - '           @SETINT $<worldname>.<playername>PlanLocChangeZ 1'
    - '         @ENDIF'
    - '         @IF s $<worldname>.<playername>PlanSchematicDirection = South'
    - '           @SETINT $<worldname>.<playername>PlanLocChangeX -1' 
    - '           @SETINT $<worldname>.<playername>PlanLocChangeY -4'
    - '           @SETINT $<worldname>.<playername>PlanLocChangeZ -2'
    - '         @ENDIF'
    - '         @IF s $<worldname>.<playername>PlanSchematicDirection = West'
    - '           @SETINT $<worldname>.<playername>PlanLocChangeX 1' 
    - '           @SETINT $<worldname>.<playername>PlanLocChangeY -4'
    - '           @SETINT $<worldname>.<playername>PlanLocChangeZ -1'
    - '         @ENDIF'
    - '         @CALL Shared:Plan'
    - '       @ELSE'
    - '         @PLAYER This building is not upgradable yet. Discover more tech.'
    - '       @ENDIF'
    - '     @ENDIF'
    - '     @ENDIF'
    - ' @ENDSWITCH'
    - '@ENDIF'
    - '@CALL Barracks:IEventSentryControl'
  IEventSentryControl:
    Script:
    - '@IF s <inventorytitle> ?= SentryControl'
    - ' @SWITCH i <clickedslot>'
    - '   @CASE 0'
    - '     @CALL Barracks:SentryControlHelp'
    - '   @CASE 1'
    - '     @CMDCON npc select $<worldname>.<var:$<playername>.SMTeam>1ID'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>1'
    - '     @PAUSE 0.2'
    - '     @CMDCON npc owner <playername>'
    - '     @CMDOP npc select $<worldname>.<var:$<playername>.SMTeam>1ID'
    - '   @CASE 2'
    - '     @CMDCON npc select $<worldname>.<var:$<playername>.SMTeam>2ID'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>2'
    - '     @PAUSE 0.2'
    - '     @CMDCON npc owner <playername>'
    - '     @CMDOP npc select $<worldname>.<var:$<playername>.SMTeam>2ID'
    - '   @CASE 3'
    - '     @CMDCON npc select $<worldname>.<var:$<playername>.SMTeam>3ID'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>3'
    - '     @PAUSE 0.2'
    - '     @CMDCON npc owner <playername>'
    - '     @CMDOP npc select $<worldname>.<var:$<playername>.SMTeam>3ID'
    - '   @CASE 4'
    - '     @CMDCON npc select $<worldname>.<var:$<playername>.SMTeam>4ID'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>4'
    - '     @PAUSE 0.2'
    - '     @CMDCON npc owner <playername>'
    - '     @CMDOP npc select $<worldname>.<var:$<playername>.SMTeam>4ID'
    - '   @CASE 5'
    - '     @CMDCON npc select $<worldname>.<var:$<playername>.SMTeam>5ID'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>5'
    - '     @PAUSE 0.2'
    - '     @CMDCON npc owner <playername>'
    - '     @CMDOP npc select $<worldname>.<var:$<playername>.SMTeam>5ID'
    - '   @CASE 6'
    - '     @CMDCON npc select $<worldname>.<var:$<playername>.SMTeam>6ID'
    - '     @SETSTR $<worldname>.<playername>CitizenSelected <var:$<playername>.SMTeam>6'
    - '     @PAUSE 0.2'
    - '     @CMDCON npc owner <playername>'
    - '     @CMDOP npc select $<worldname>.<var:$<playername>.SMTeam>6ID'
    - '   @CASE 9'
    - '     @IF b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Built = True'
    - '     @AND b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Dead != True'
    - '       @CMDOP npc tphere'
    - '     @ELSE'
    - '       @PLAYER Your sentry is dead or has never been spawned'
    - '     @ENDIF'
    - '   @CASE 10'
    - '     @IF b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Built = True'
    - '     @AND b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Dead != True'
    - '       @CMDOP sentry guard <playername>'
    - '     @ELSE'
    - '       @PLAYER Your sentry is dead or has never been spawned'
    - '     @ENDIF'
    - '   @CASE 11'
    - '     @IF b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Built = True'
    - '     @AND b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Dead != True'
    - '       @CMDOP sentry guard'
    - '     @ELSE'
    - '       @PLAYER Your sentry is dead or has never been spawned'
    - '     @ENDIF'    
    - '   @CASE 12'
    - '     @IF b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Built = True'
    - '     @AND b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Dead != True'
    - '       @CMDOP npc path'
    - '     @ELSE'
    - '       @PLAYER Your sentry is dead or has never been spawned'
    - '     @ENDIF'    
    - '   @CASE 13'
    - '@PLAYER &8LOG Selected $<worldname>.<var:$<playername>.SMTeam>1 Built $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Built Dead $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Built'
    - '     @IF b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Built = True'
    - '     @AND b $<worldname>.<var:$<worldname>.<playername>CitizenSelected>Dead != True'
    - '       @CMDOP sentry info'
    - '     @ELSE'
    - '       @PLAYER Your sentry is dead or has never been spawned'
    - '     @ENDIF'    
    - ' @ENDSWITCH'
    - '@ENDIF'
  HireStick:
    Script:
    - '@PLAYER &8LOG Start HireStick script'
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit >= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:30>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip WOOD_SWORD'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit $<worldname>.<var:$<playername>.SMTeam>Pop of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  HireStone:
    Script:
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit <= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:60>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip STONE_SWORD'
    - '     @CMDOP sentry equip LEATHER_HELMET'
    - '     @CMDOP sentry equip LEATHER_CHESTPLATE'
    - '     @CMDOP sentry equip LEATHER_LEGGINGS'
    - '     @CMDOP sentry equip LEATHER_BOOTS'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  HireIron1:
    Script:
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit <= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:120>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip IRON_SWORD'
    - '     @CMDOP sentry equip IRON_HELMET'
    - '     @CMDOP sentry equip LEATHER_CHESTPLATE'
    - '     @CMDOP sentry equip LEATHER_LEGGINGS'
    - '     @CMDOP sentry equip LEATHER_BOOTS'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  HireIron2:
    Script:
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit <= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:180>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip IRON_SWORD'
    - '     @CMDOP sentry equip IRON_HELMET'
    - '     @CMDOP sentry equip IRON_CHESTPLATE'
    - '     @CMDOP sentry equip IRON_LEGGINGS'
    - '     @CMDOP sentry equip IRON_BOOTS'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  HireDiamond:
    Script:
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit <= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:240>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip DIAMOND_SWORD'
    - '     @CMDOP sentry equip DIAMOND_HELMET'
    - '     @CMDOP sentry equip IRON_CHESTPLATE'
    - '     @CMDOP sentry equip IRON_LEGGINGS'
    - '     @CMDOP sentry equip IRON_BOOTS'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  HireBow1:
    Script:
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit <= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:80>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip BOW'
    - '     @CMDOP sentry equip LEATHER_HELMET'
    - '     @CMDOP sentry equip LEATHER_CHESTPLATE'
    - '     @CMDOP sentry equip LEATHER_LEGGINGS'
    - '     @CMDOP sentry equip LEATHER_BOOTS'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  HireBow2:
    Script:
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit <= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:200>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip BOW'
    - '     @CMDOP sentry equip IRON_HELMET'
    - '     @CMDOP sentry equip IRON_CHESTPLATE'
    - '     @CMDOP sentry equip IRON_LEGGINGS'
    - '     @CMDOP sentry equip IRON_BOOTS'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  HireBow3:
    Script:
    - '@IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@OR s $<worldname>.<playername>CitizenSelectType = New'
#    - ' @IF i $<worldname>.<var:$<playername>.SMTeam>PopLimit <= $<worldname>.<var:$<playername>.SMTeam>Pop'
    - '   @IF i <secondticks:0> >= $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer <secondticks:280>'
    - '     @ADDINT $<worldname>.<var:$<playername>.SMTeam>Pop 1'
    - '     @CALL Barracks:Hire'
    - '     @CMDOP sentry health 60'
    - '     @CMDOP sentry healrate 0'
    - '     @CMDOP sentry equip BOW'
    - '     @CMDOP sentry equip DIAMOND_HELMET'
    - '     @CMDOP sentry equip DIAMOND_CHESTPLATE'
    - '     @CMDOP sentry equip DIAMOND_LEGGINGS'
    - '     @CMDOP sentry equip DIAMOND_BOOTS'
    - '   @ELSE'
    - '     @SETINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimer'
    - '     @SUBINT $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft <secondticks:0>'
    - '     @PLAYER $<worldname>.<var:$<worldname>.<playername>BuildingID>UseTimeLeft Seconds left before you can recruit another soldier from this Barracks.'
    - '   @ENDIF'
#    - ' @ELSE'
#    - '   @PLAYER You have reached your teams population limit of $<worldname>.<var:$<playername>.SMTeam>PopLimit . You must build or upgrade structures that increase population in order to recruit more troops.'
#    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You must select an empty citizen slot before hiring.'
    - '@ENDIF'
  Hire:
    Script:
    - '     @IF s $<worldname>.<playername>CitizenSelectType = New'
    - '       @CMDOP npc create <var:$<worldname>.<playername>CitizenTeamID> --type PLAYER --trait sentry'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Built True'
    - '       @PAUSE 2'
    # Setting up sentry default attack list.
    - '       @PLAYER &8LOG Start Hire script'
    - '       @CMDCON scoreboard teams join <var:$<playername>.SMTeam> <var:$<playername>.SMTeam>'
    - '       @CMDOP sentry ignore add group:<var:$<playername>.SMTeam>'
    - '       @SETINT $<worldname>.TeamListCountTmp 0'
    - '       @LOOP @<worldname>.TeamList'
    - '         @SETSTR $<worldname>.TeamListStr @<worldname>.TeamList[<var:$<worldname>.TeamListCountTmp>]'
    - '         @IF s $<worldname>.TeamListStr != $<playername>.SMTeam'
    - '           @CMDOP sentry target add group:<var:$<worldname>.TeamListStr>'
    - '         @ENDIF'
    - '         @ADDINT $<worldname>.TeamListCountTmp 1'
    - '       @ENDLOOP'
    - '       @CMDOP npc nickname --set <var:$<playername>.SMTeam>'
#    - '@CMDOP npc constant --set Team --value <var:$<playername>.SMTeam>'
    - '       @CMDOP npc assignment --set Sentry'
    - '       @PAUSE 2'
    - '       @SETINT $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>ID $<worldname>.<playername>CitizenID'
#    - '@CMDOP sentry healrate 0'
#    - '@CMDOP sentry respawn 0'
#    - '@CMDOP npc playerlist'
    - '       @CMDOP npc pushable'
    - '       @CMDOP sentry guard <playername>'
    - '     @ENDIF'
    - '     @IF s $<worldname>.<playername>CitizenSelectType = Dead'
    - '@PLAYER &8LOG $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>ID'
    - '       @CMDOP npc spawn $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>ID'
    - '       @SETBOOL $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>Dead False'
    - '       @PAUSE 1'
    - '       @CMDCON npc select $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>ID'
    - '       @PAUSE 0.2'
    - '       @CMDCON npc owner <playername>'
    - '       @CMDOP npc select $<worldname>.<var:$<worldname>.<playername>CitizenTeamID>ID'
    - '       @CMDOP npc tphere'
    - '       @CMDOP sentry guard <playername>'
    - '     @ENDIF'