# This is where scripts for custom traps will be.
Scripts:
  TestPaste:
    Script:
    - '@CMDOP /schematic load TestCB'
    - '@PAUSE 2'
    - '@CMDOP /paste'
    - '@PLAYER &8LOG Test TestPaste Done'
  PlaceBlock:
    Script:
    # NEW ONLY USES ONE COMMAND BLOCK by using Essentials Sudo and CommandHelper Macro.
    # This is Macro(Alias) /placeblock $script $player $time $blockid $variable $loc = /broadcast Log Test $script $player $time $blockid $variable $loc \ /vtrigger setint $player PlaceBlockTimeTMP $time \ /vtrigger setstr $player PlaceBlockIDTMP $blockid \ /vtrigger setstr $player PlaceBlockVarTMP $variable \ /vtrigger setstr $player RelativePBLocTMP $loc \ /vt run $script $player
    #
    # Example of a Variable PlaceBlock for a Door Close then Open
    # Set time to 0 for perm placement of block.
    # /runalias /placeblock Traps:PlaceBlock @p[r=5] 0 152:0 SSCGMMasterSelect 1,2,3
#  ResetTest:
#    Script:
#    - '@PLAYER Reset Started Set $SSCGMMasterSelect.Set BlockID $SSCGMMasterSelect.BlockID BlockLoc $SSCGMMasterSelect.BlockLoc'
#    - '@SETSTR $SSCGMMasterSelect.Set False'
#    - '@SETBLOCK $SSCGMMasterSelect.BlockID $SSCGMMasterSelect.BlockLoc'
#
    # Example of a Timed 10 second PlaceBlock For Door Open
    # /runalias /placeblock Traps:PlaceBlock @p[r=5] 10 152:0 None 1,2,3
    - '@PLAYER &8LOG Trap.PlaceBlock Script Started'
    - '@CALL Traps:FindCommandBlock'
    - '@IF s $<playername>.FoundCommandBlock = True'
    - '@PLAYER &8LOG CBlock Loc $<playername>.CommandBlockLoc using Relative of $<playername>.RelativePBLocTMP'
    - ' @SETSTR $TMP.RelativePBLocTMP $<playername>.RelativePBLocTMP'
    - ' @SETSTR $TMP.CommandBlockLocTMP $<playername>.CommandBlockLoc'
    - ' @SETSTR $<playername>.RelativePBLocTMP <relativeloc:$TMP.CommandBlockLocTMP:$TMP.RelativePBLocTMP>'
    - '@PLAYER &8LOG PlaceBlock Start Loc $<playername>.RelativePBLocTMP'
    - '@CALL Traps:IDGenerator'
    - '@PLAYER &8LOG PlaceBlock ID set to $<playername>.TrapID'
    - '@IF s $PlaceBlock<var:$<playername>.TrapID>.Running != True'
    - '@AND s <var:$<playername>.PlaceBlockVarTMP>.Set != True'
    - ' @SETSTR $PlaceBlock<var:$<playername>.TrapID>.Running True'
    - '@PLAYER &8LOG RelativePBLocTMP is $<playername>.RelativePBLocTMP'
    - '@GETBLOCK $<playername>.PlaceBlockOrigIDTMP $<playername>.RelativePBLocTMP'
    - '@EXPLOSION 0.0 $<playername>.RelativePBLocTMP'
    - '@SETBLOCK $<playername>.PlaceBlockIDTMP $<playername>.RelativePBLocTMP'
    - '@IF i $<playername>.PlaceBlockTimeTMP >= 1'
    - ' @WHILE i $<playername>.PlaceBlockTimeTMP > 1'
    - '   @PAUSE 1'
    - '   @SUBINT $<playername>.PlaceBlockTimeTMP 1'
    - '@PLAYER &8LOG While time set $<playername>.PlaceBlockTimeTMP'
    - ' @ENDWHILE'
    - ' @SETBLOCK $<playername>.PlaceBlockOrigIDTMP $<playername>.RelativePBLocTMP'
    - '@ELSE'
    - ' @SETSTR $<var:$<playername>.PlaceBlockVarTMP>.Set True'
    - ' @SETSTR $<var:$<playername>.PlaceBlockVarTMP>.BlockID $<playername>.PlaceBlockOrigIDTMP'
    - ' @SETSTR $<var:$<playername>.PlaceBlockVarTMP>.BlockLoc $<playername>.RelativePBLocTMP'
    - '@ENDIF'
    - '@SETSTR $<playername>.PlaceBlockOrigIDTMP Cleared'
    - '@SETSTR $PlaceBlock<var:$<playername>.TrapID>.Running False'
    - '@ENDIF'
    - '@ENDIF'
  SpawnMob:
    Script:
    # waiting on epicboss to beable to spawn my location.
    # http://wiki.sk89q.com/wiki/CommandBook/Commands#Mobs
    # /spawnmob Spider|Zombie 2 716,26,67
    # This is Macro(Alias) /VTFixLocation $loc $look $look2 = /vtrigger setstr player() FixLocTMP $loc
    # /sudo @p[r=6] runalias /trapmob 1 Traps:SpawnMob @p[r=6] 2 5 Zombie 2 2,2,2
    # This is Macro(Alias) /trapmob 1 $script $player $distance $loop $pause $mob $amt $loc = /vtrigger setstr $player RelativeSMLocTMP $loc \ /vtrigger setstr $player MobTypeTMP $mob \ /vtrigger setint $player MobAmtTMP $amt \ /vtrigger setint $player MobLoopTMP $loop \ /vtrigger setstr $player MobPauseTMP $pause \ /vtrigger setint $player MobDistanceTMP $distance \ /vt run $script $player
    # /sudo @p[r=6] runalias /trapmob 2 Traps:SpawnMob @p[r=6] 10 5 5 Zombie 1 2,0,2 Skeleton 1 -2,0,-2
    # This is Macro(Alias) /trapmob 2 $script $player $distance $loop $pause $mob $amt $loc $mob2 $amt2 $loc2 = /vtrigger setstr $player RelativeSMLocTMP $loc \ /vtrigger setstr $player MobTypeTMP $mob \ /vtrigger setint $player MobAmtTMP $amt \ /vtrigger setint $player MobLoopTMP $loop \ /vtrigger setstr $player MobPauseTMP $pause \ /vtrigger setint $player MobDistanceTMP $distance \ /vtrigger setstr $player RelativeSMLoc2TMP $loc2 \ /vtrigger setstr $player MobType2TMP $mob2 \ /vtrigger setint $player MobAmt2TMP $amt2 \ /vt run $script $player
    # /sudo @p[r=6] runalias /trapmob 10 Traps:SpawnMob @p[r=6] 10 5 5 Zombie 1 1,0,1 Skeleton 1 2,0,2 Skeleton 1 3,0,3 Skeleton 1 4,0,4 Skeleton 1 5,0,5 Skeleton 1 6,0,6 Skeleton 1 7,0,7 Skeleton 1 8,0,8 Skeleton 1 9,0,9 Skeleton 1 10,0,10
    # This is Macro(Alias) /trapmob 10 $script $player $distance $loop $pause $mob $amt $loc $mob2 $amt2 $loc2 $mob3 $amt3 $loc3 $mob4 $amt4 $loc4 $mob5 $amt5 $loc5 $mob6 $amt6 $loc6 $mob7 $amt7 $loc7 $mob8 $amt8 $loc8 $mob9 $amt9 $loc9 $mob10 $amt10 $loc10= /vtrigger setstr $player RelativeSMLocTMP $loc \ /vtrigger setstr $player MobTypeTMP $mob \ /vtrigger setint $player MobAmtTMP $amt \ /vtrigger setint $player MobLoopTMP $loop \ /vtrigger setstr $player MobPauseTMP $pause \ /vtrigger setint $player MobDistanceTMP $distance \ /vtrigger setstr $player RelativeSMLoc2TMP $loc2 \ /vtrigger setstr $player MobType2TMP $mob2 \ /vtrigger setint $player MobAmt2TMP $amt2 \ /vtrigger setstr $player RelativeSMLoc3TMP $loc3 \ /vtrigger setstr $player MobType3TMP $mob3 \ /vtrigger setint $player MobAmt3TMP $amt3 \ /vtrigger setstr $player RelativeSMLoc4TMP $loc4 \ /vtrigger setstr $player MobType4TMP $mob4 \ /vtrigger setint $player MobAmt4TMP $amt4 \ /vtrigger setstr $player RelativeSMLoc5TMP $loc5 \ /vtrigger setstr $player MobType5TMP $mob5 \ /vtrigger setint $player MobAmt5TMP $amt5 \  /vtrigger setstr $player RelativeSMLoc6TMP $loc6 \ /vtrigger setstr $player MobType6TMP $mob6 \ /vtrigger setint $player MobAmt6TMP $amt6 \ /vtrigger setstr $player RelativeSMLoc7TMP $loc7 \ /vtrigger setstr $player MobType7TMP $mob7 \ /vtrigger setint $player MobAmt7TMP $amt7 \ /vtrigger setstr $player RelativeSMLoc8TMP $loc8 \ /vtrigger setstr $player MobType8TMP $mob8 \ /vtrigger setint $player MobAmt8TMP $amt8 \ /vtrigger setstr $player RelativeSMLoc9TMP $loc9 \ /vtrigger setstr $player MobType9TMP $mob9 \ /vtrigger setint $player MobAmt9TMP $amt9 \ /vtrigger setstr $player RelativeSMLoc10TMP $loc10 \ /vtrigger setstr $player MobType10TMP $mob10 \ /vtrigger setint $player MobAmt10TMP $amt10 \ /vt run $script $player    
# Maybe add $effect for potion effects ?
# Things to think about.. running two /trapmob from the same commandblock location using 2 different commandblocks. - MIGHT BREAK IT AS SET RIGHT NOW
    - '@CALL Traps:FindCommandBlock'
    - '@IF s $<playername>.FoundCommandBlock = True'
    - '@PLAYER &8LOG CBlock Loc $<playername>.CommandBlockLoc'
#    - ' @SETSTR $<playername>.TrapTestLoc <relativeloc:$<playername>.CommandBlockLoc:$<playername>.RelativeSMLoc1TMP>'
#    - '@PLAYER &8LOG Trap Start Loc $<playername>.TrapTestLoc'
#    - ' @CALL Traps:IDGenerator'
    - ' @DELVAR i $<playername>.TrapID'
    - ' @DELVAR s $<playername>.TrapID'
    - ' @SETSTR $<playername>.TrapID <relativeloc:$<playername>.CommandBlockLoc:$<playername>.RelativeSMLoc1TMP>'
    - ' @CMDOP runalias /VTFixLocID $<playername>.TrapID'
    - ' @PAUSE 0.1'
    - ' @SETSTR $<playername>.TrapID $<playername>.FixLocTMP'
    - ' @DELVAR s $<playername>.FixLocTMP'
    - '@PLAYER &8LOG Trap ID set to $<playername>.TrapID and is set to $<playername>.SpawnMob<var:$<playername>.TrapID>Running'
    - '@IF s $<playername>.SpawnMob<var:$<playername>.TrapID>Running != True'
    - ' @SETSTR $<playername>.SpawnMob<var:$<playername>.TrapID>Running True'
#    
# REMOVING JUST GOING TO MAKE A COMPLETE NEW SCRIPT - START Creation of a very unique ID that traps will use to prevent other traps triggering to cause them to stop working if there are multiple commandblocks needed
#    - '@ADDINT $<playername>.SpawnMobRunNum 1'
#
    - '@LOOP $<playername>.AmtOfLocationsTMP'
    - ' @ADDINT $<playername>.AmtOfLocationsCountTMP 1'
    - ' @SETSTR $<playername>.RelativeSMLocUSETMP $<playername>.RelativeSMLoc<var:$<playername>.AmtOfLocationsCountTMP>TMP'
    - ' @SETSTR $<playername>.TrapSpawnMobLoc<var:$<playername>.AmtOfLocationsCountTMP> <relativeloc:$<playername>.CommandBlockLoc:$<playername>.RelativeSMLocUSETMP>'
    - ' @CMDOP runalias /VTFixLoc $<playername>.TrapSpawnMobLoc<var:$<playername>.AmtOfLocationsCountTMP>'
    - ' @PAUSE 0.1'
    - ' @SETSTR $<playername>.TrapSpawnMobLoc<var:$<playername>.AmtOfLocationsCountTMP> $<playername>.FixLocTMP'
    - ' @DELVAR s $<playername>.FixLocTMP'
    - ' @PLAYER &8LOG Trap Start Loc<var:$<playername>.AmtOfLocationsCountTMP> $<playername>.TrapSpawnMobLoc<var:$<playername>.AmtOfLocationsCountTMP>'
    - ' @DELVAR s $<playername>.RelativeSMLoc<var:$<playername>.AmtOfLocationsCountTMP>TMP'
    - '@ENDLOOP'
    - '@DELVAR i $<playername>.AmtOfLocationsCountTMP'
    - '@DELVAR s $<playername>.RelativeSMLocUSETMP'
    - '@LOOP $<playername>.MobLoopTMP'
    - '@SETSTR $<playername>.SMCurLocTMP <currentloc:<playername>>'
    - ' @IF i <distance:$<playername>.SMCurLocTMP:$<playername>.CommandBlockLoc> >= $<playername>.MobDistanceTMP'
    - '@PLAYER &8LOG Script Exit Due to Distance <distance:$<playername>.SMCurLocTMP:$<playername>.CommandBlockLoc> is greater then $<playername>.MobDistanceTMP'
    - '     @CALL Traps:DOESpawnMob'
    - '     @EXIT'
    - ' @ENDIF'
    - '@LOOP $<playername>.AmtOfLocationsTMP'
    - ' @ADDINT $<playername>.AmtOfLocationsCountTMP 1'
    - ' @CMDOP spawnmob $<playername>.MobType<var:$<playername>.AmtOfLocationsCountTMP>TMP $<playername>.MobAmt<var:$<playername>.AmtOfLocationsCountTMP>TMP $<playername>.TrapSpawnMobLoc<var:$<playername>.AmtOfLocationsCountTMP>'    
    - '@ENDLOOP'
    - '@DELVAR i $<playername>.AmtOfLocationsCountTMP'
    - '@PLAYER &8LOG Pause $<playername>.MobPauseTMP'
    - '@LOOP $<playername>.MobPauseTMP'
    - ' @PAUSE 1'
    - '@ENDLOOP'
    - '@ENDLOOP'
    - '@CALL Traps:DOESpawnMob'
    - '@ELSE'
    - '@PLAYER &8LOG Trap $<playername>.CommandBlockLoc is $<playername>.SpawnMob<var:$<playername>.TrapID>Running Already Running '
    - '@ENDIF'
    - '@ENDIF'
  DOESpawnMob:
    Script:
    - '@DELVAR s $<playername>.SpawnMob<var:$<playername>.TrapID>Running'
    - '@DELVAR i $<playername>.AmtOfLocationsCountTMP'
    - '@DELVAR i $<playername>.AmtOfLocationsTMP'
    - '@DELVAR s $<playername>.SMCurLocTMP'
    - '@DELVAR i $<playername>.MobDistanceTMP'
    - '@DELVAR i $<playername>.MobLoopTMP'
    - '@DELVAR s $<playername>.MobPauseTMP'
    - '@DELVAR s $<playername>.MobType1TMP'
    - '@DELVAR i $<playername>.MobAmt1TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc1'
    - '@DELVAR s $<playername>.MobType2TMP'
    - '@DELVAR i $<playername>.MobAmt2TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc2'
    - '@DELVAR s $<playername>.MobType3TMP'
    - '@DELVAR i $<playername>.MobAmt3TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc3'
    - '@DELVAR s $<playername>.MobType4TMP'
    - '@DELVAR i $<playername>.MobAmt4TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc4'
    - '@DELVAR s $<playername>.MobType5TMP'
    - '@DELVAR i $<playername>.MobAmt5TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc5'
    - '@DELVAR s $<playername>.MobType6TMP'
    - '@DELVAR i $<playername>.MobAmt6TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc6'
    - '@DELVAR s $<playername>.MobType7TMP'
    - '@DELVAR i $<playername>.MobAmt7TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc7'
    - '@DELVAR s $<playername>.MobType8TMP'
    - '@DELVAR i $<playername>.MobAmt8TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc8'
    - '@DELVAR s $<playername>.MobType9TMP'
    - '@DELVAR i $<playername>.MobAmt9TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc9'
    - '@DELVAR s $<playername>.MobType10TMP'
    - '@DELVAR i $<playername>.MobAmt10TMP'
    - '@DELVAR s $<playername>.TrapSpawnMobLoc10'
  RemHor4:
    Script:
    # PLACE TWO COMMAND BLOCKS WITH THE FOLLOWING COMMANDS TO ACTIVATE THIS:
    # /vtrigger setstr @p[r=6] RelativeLocTMP 3,-1,-2
    # /vt run Traps:TrapTest @p[r=6]
    # NEW ONLY USES ONE COMMAND BLOCK by using Essentials Sudo and CommandHelper Macro.
    # /sudo @p[r=6] runalias /trap Traps:TrapTest @p[r=6] 3,-1,-2
    # This is Macro(Alias) /trap $script $player $loc = /vtrigger setstr $player RelativeLocTMP $loc \ /vt run $script $player
    - '@CALL Traps:FindCommandBlock'
    - '@IF s $<playername>.FoundCommandBlock = True'
    - '@PLAYER &8LOG CBlock Loc $<playername>.CommandBlockLoc using Relative of $<playername>.RelativeLocTMP'
    - ' @SETSTR $<playername>.TrapTestLoc <relativeloc:$<playername>.CommandBlockLoc:$<playername>.RelativeLocTMP>'
    - '@PLAYER &8LOG Trap Start Loc $<playername>.TrapTestLoc'
    - '@CALL Traps:IDGenerator'
    - '@PLAYER &8LOG Trap ID set to $<playername>.TrapID'
    - '@IF s $Trap<var:$<playername>.TrapID>.Running != True'
    - ' @SETSTR $Trap<var:$<playername>.TrapID>.Running True'
    - '@PLAYER TrapTestLoc is $<playername>.TrapTestLoc'
    - '@GETBLOCK $<playername>.TrapTMP $<playername>.TrapTestLoc'
    - '@GETBLOCK $<playername>.Trap2TMP <relativeloc:$<playername>.TrapTestLoc:1,0,0>'
    - '@GETBLOCK $<playername>.Trap3TMP <relativeloc:$<playername>.TrapTestLoc:1,0,1>'
    - '@GETBLOCK $<playername>.Trap4TMP <relativeloc:$<playername>.TrapTestLoc:0,0,1>'
    - '@EXPLOSION 0.0 $<playername>.TrapTestLoc'
    - '@SETBLOCK 0:0 $<playername>.TrapTestLoc'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:1,0,0>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:1,0,1>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:0,0,1>'
    - '@PAUSE 2'
    - '@SETBLOCK $<playername>.TrapTMP $<playername>.TrapTestLoc'
    - '@SETBLOCK $<playername>.Trap2TMP <relativeloc:$<playername>.TrapTestLoc:1,0,0>'
    - '@SETBLOCK $<playername>.Trap3TMP <relativeloc:$<playername>.TrapTestLoc:1,0,1>'
    - '@SETBLOCK $<playername>.Trap4TMP <relativeloc:$<playername>.TrapTestLoc:0,0,1>'
    - '@DELVAR s $<playername>.TrapTMP'
    - '@DELVAR s $<playername>.Trap2TMP'
    - '@DELVAR s $<playername>.Trap3TMP'
    - '@DELVAR s $<playername>.Trap4TMP'
    - '@DELVAR s $Trap<var:$<playername>.TrapID>.Running'
    - '@ENDIF'
    - '@ENDIF'
  IDGenerator:
    Script:
#    - '@SETSTR $<playername>.WhileForever True'
    - '@LOOP $TrapID.Count'
    - ' @ADDINT $<playername>.TmpINTCount 1'
    - ' @PLAYER &8LOG TmpIntCount $<playername>.TmpINTCount'
    - ' @IF s $TrapID.<var:$<playername>.TmpINTCount> = $<playername>.TrapTestLoc'
    - '     @SETINT $<playername>.TrapID $<playername>.TmpINTCount'
    - '     @CALL Traps:IDDOE'
    - '     @EXIT'
    - ' @ENDIF'
    - '@ENDLOOP'
    - '@ADDINT $TrapID.Count 1'
    - '@SETSTR $TrapID.<var:$TrapID.Count> $<playername>.TrapTestLoc'
    - '@SETINT $<playername>.TrapID $TrapID.Count'
    - '@CALL Traps:IDDOE'
  IDDOE:
    Script:
    - '@SETINT $<playername>.TmpINTCount 0'
    - '@SETSTR $<playername>.WhileForever 0'
  TrapTest:
    Script:
    # PLACE TWO COMMAND BLOCKS WITH THE FOLLOWING COMMANDS TO ACTIVATE THIS:
    # /vtrigger setstr @p[r=6] RelativeLocTMP 3,-1,-2
    # /vt run Traps:TrapTest @p[r=6]
    - '@CALL Traps:FindCommandBlock'
    - '@IF s $<playername>.FoundCommandBlock = True'
    - '@PLAYER &8LOG CBlock Loc $<playername>.CommandBlockLoc using Relative of $<playername>.RelativeLocTMP'
    - ' @SETSTR $<playername>.TrapTestLoc <relativeloc:$<playername>.CommandBlockLoc:$<playername>.RelativeLocTMP>'
    - '@PLAYER &8LOG Trap Start Loc $<playername>.TrapTestLoc'
    - '@CALL Traps:IDGenerator'
    - '@PLAYER &8LOG Trap ID set to $<playername>.TrapID'
    - '@IF s $Trap<var:$<playername>.TrapID>.Running != True'
    - ' @SETSTR $Trap<var:$<playername>.TrapID>.Running True'
    - '@PLAYER TrapTestLoc is $<playername>.TrapTestLoc'
    - '@GETBLOCK $<playername>.TrapTMP $<playername>.TrapTestLoc'
    - '@GETBLOCK $<playername>.Trap2TMP <relativeloc:$<playername>.TrapTestLoc:1,0,0>'
    - '@GETBLOCK $<playername>.Trap3TMP <relativeloc:$<playername>.TrapTestLoc:1,0,1>'
    - '@GETBLOCK $<playername>.Trap4TMP <relativeloc:$<playername>.TrapTestLoc:0,0,1>'
#    - '@GETBLOCK $<playername>.Trap5TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-1>'
#    - '@GETBLOCK $<playername>.Trap6TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-2>'
    - '@EXPLOSION 0.0 $<playername>.TrapTestLoc'
#    - '@PAUSE 0.2'
    - '@SETBLOCK 0:0 $<playername>.TrapTestLoc'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:1,0,0>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:1,0,1>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:0,0,1>'
#    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:-1,-1,-1>'
#    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:-1,-1,-2>' 
    - '@PAUSE 2'
    - '@SETBLOCK $<playername>.TrapTMP $<playername>.TrapTestLoc'
    - '@SETBLOCK $<playername>.Trap2TMP <relativeloc:$<playername>.TrapTestLoc:1,0,0>'
    - '@SETBLOCK $<playername>.Trap3TMP <relativeloc:$<playername>.TrapTestLoc:1,0,1>'
    - '@SETBLOCK $<playername>.Trap4TMP <relativeloc:$<playername>.TrapTestLoc:0,0,1>'
#    - '@SETBLOCK $<playername>.Trap5TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-1>'
#    - '@SETBLOCK $<playername>.Trap6TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-2>'
    - '@DELVAR s $<playername>.TrapTMP'
    - '@DELVAR s $<playername>.Trap2TMP'
    - '@DELVAR s $<playername>.Trap3TMP'
    - '@DELVAR s $<playername>.Trap4TMP'
    - '@DELVAR s $<playername>.Trap5TMP'
    - '@DELVAR s $<playername>.Trap6TMP'    
#    - '@PLAYER &8LOG <relativeloc:$<playername>.TrapTestLoc:-1,-1,-2>'
    - '@DELVAR s $Trap<var:$<playername>.TrapID>.Running'
    - '@ENDIF'
    - '@ENDIF'
  FindCommandBlock:
    Script:
    - '@SETSTR $<playername>.FoundCommandBlock DEL'
    - '@SETSTR $<playername>.CommandBlockLoc DEL'
    - '@SETSTR $<playername>.FCBLocTMP DEL'
    - '@SETINT $<playername>.FCBStep 0'
    - '@SETINT $<playername>.FCBStepsRan 0'
    - '@SETSTR $<playername>.FCBBlockTMP DEL'
    - '@SETSTR $<playername>.FCBLocTMP <currentloc:<playername>>'
    - '@WHILE s $<playername>.FoundCommandBlock != True'
    - '@GETBLOCK $<playername>.FCBBlockTMP $<playername>.FCBLocTMP'
#    - '@SETBLOCK 35:14 $<playername>.FCBLocTMP'
#    - '@PAUSE 0.2'
    - '@IF s $<playername>.FCBBlockTMP != 0:0'
#    - '@PLAYER &8LOG Check $<playername>.FCBStep Loc $<playername>.FCBLocTMP Block $<playername>.FCBBlockTMP'
    - '@ENDIF'
    - '@IF s $<playername>.FCBBlockTMP = 137:0'
    - '@OR s $<playername>.FCBBlockTMP = 137:1'
    - ' @SETSTR $<playername>.CommandBlockLoc $<playername>.FCBLocTMP'
    - ' @SETSTR $<playername>.FoundCommandBlock True'
#    - ' @CALL Traps:FCBDOE'
    - '@PLAYER &8LOG CommandBlock Found at Loc $<playername>.CommandBlockLoc'
    - ' @EXIT'
    - '@ELSE'
    - ' @ADDINT $<playername>.FCBStep 1'
    - ' @IF i $<playername>.FCBStepsRan = 4'
#    - '     @CALL Traps:FCBDOE'
    - '@PLAYER &8LOG all FCBStepsRan No CommandBlock found closing script.'
    - '     @EXIT'
    - ' @ENDIF'
    - ' @CALL Traps:SpiralCheck'
    - '@ENDIF'
    - '@ENDWHILE'
#    - '@CALL Traps:FCBDOE'
  SpiralCheck:
    Script:
    - '@IF i $<playername>.FCBStep = 1'
    - ' @SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep = 2'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 3'
    - '@AND i $<playername>.FCBStep <= 4'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:-1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 5'
    - '@AND i $<playername>.FCBStep <= 6'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,-1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 7'
    - '@AND i $<playername>.FCBStep <= 9'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 10'
    - '@AND i $<playername>.FCBStep <= 12'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 13'
    - '@AND i $<playername>.FCBStep <= 16'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:-1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 17'
    - '@AND i $<playername>.FCBStep <= 20'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,-1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 21'
    - '@AND i $<playername>.FCBStep <= 25'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 26'
    - '@AND i $<playername>.FCBStep <= 30'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 31'
    - '@AND i $<playername>.FCBStep <= 36'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:-1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 37'
    - '@AND i $<playername>.FCBStep <= 42'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,-1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 43'
    - '@AND i $<playername>.FCBStep <= 49'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 50'
    - '@AND i $<playername>.FCBStep <= 56'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 57'
    - '@AND i $<playername>.FCBStep <= 64'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:-1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 65'
    - '@AND i $<playername>.FCBStep <= 72'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,-1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 73'
    - '@AND i $<playername>.FCBStep <= 81'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 82'
    - '@AND i $<playername>.FCBStep <= 90'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:0,0,1>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep >= 91'
    - '@AND i $<playername>.FCBStep <= 99'
    - '@SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:-1,0,0>'
    - '@ENDIF'
    - '@IF i $<playername>.FCBStep = 100'
    - ' @SETSTR $<playername>.FCBLocTMP <relativeloc:$<playername>.FCBLocTMP:4,-1,-5>'
    - ' @SETINT $<playername>.FCBStep 0'
    - ' @ADDINT $<playername>.FCBStepsRan 1'
    - '@ENDIF'
  FCBDOE:
    Script:
    - '@SETSTR $<playername>.FCBLocTMP Cleared'
    - '@SETINT $<playername>.FCBStep 0'
    - '@SETINT $<playername>.FCBStepsRan 0'
    - '@SETSTR $<playername>.FCBBlockTMP Cleared'
  BRAINSTORM:
    Script:
# THIS DID NOT WORK Because there were still . in the locations which breaks the variables.
#   Setting Trap ID to Command Block Location. Then making sure script cannot activate twice from that specific trap.
    - '@CMDCON sudo <playername> runalias /VTFixLocation $<playername>.CommandBlockLoc'
    - '@PAUSE 0.1'
    - '@SETSTR $<playername>.CommandBlockLoc $<playername>.FixLocTMP'
    - '@DELVAR s $<playername>.FixLocTMP'
    - '@PLAYER &8LOG Trap ID set to $<playername>.CommandBlockLoc and is set to $<playername>.SpawnMob<var:$<playername>.CommandBlockLoc>Running'
    - '@IF s $<playername>.SpawnMob<var:$<playername>.CommandBlockLoc>Running != True'
    - ' @SETSTR $<playername>.SpawnMob<var:$<playername>.CommandBlockLoc>Running True'
    # Monster Apoc Example
        #OLD - Waiting for update to allow x,y,z instead of having x y z being seperate. http://dev.bukkit.org/bukkit-plugins/monster-apocalypse/pages/spawn-points/
    - '@CMDOP ma addspawnpoint Zombies1 Zombie 10 1 0 16 100.0'
    - '@CMDOP ma setx Zombies1 12'
    - '@CMDOP ma sety Zombies1 66'
    - '@CMDOP ma setz Zombies1 14'
    - '@CMDOP ma removespawnpoint Zombies1'
    # Trap Example
    - '@GETBLOCK $<playername>.TrapTMP <relativeloc:$<playername>.TrapTestLoc:0,-1,-1>'
    - '@GETBLOCK $<playername>.Trap2TMP <relativeloc:$<playername>.TrapTestLoc:0,-1,-2>'
    - '@GETBLOCK $<playername>.Trap3TMP <relativeloc:$<playername>.TrapTestLoc:1,-1,-1>'
    - '@GETBLOCK $<playername>.Trap4TMP <relativeloc:$<playername>.TrapTestLoc:1,-1,-2>'
    - '@GETBLOCK $<playername>.Trap5TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-1>'
    - '@GETBLOCK $<playername>.Trap6TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-2>'
    - '@EXPLOSION 0.0 <relativeloc:$<playername>.TrapTestLoc:1,-1,-1>'
#    - '@PAUSE 0.2'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:0,-1,-1>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:0,-1,-2>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:1,-1,-1>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:1,-1,-2>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:-1,-1,-1>'
    - '@SETBLOCK 0:0 <relativeloc:$<playername>.TrapTestLoc:-1,-1,-2>' 
    - '@PAUSE 2'
    - '@SETBLOCK $<playername>.TrapTMP <relativeloc:$<playername>.TrapTestLoc:0,-1,-1>'
    - '@SETBLOCK $<playername>.Trap2TMP <relativeloc:$<playername>.TrapTestLoc:0,-1,-2>'
    - '@SETBLOCK $<playername>.Trap3TMP <relativeloc:$<playername>.TrapTestLoc:1,-1,-1>'
    - '@SETBLOCK $<playername>.Trap4TMP <relativeloc:$<playername>.TrapTestLoc:1,-1,-2>'
    - '@SETBLOCK $<playername>.Trap5TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-1>'
    - '@SETBLOCK $<playername>.Trap6TMP <relativeloc:$<playername>.TrapTestLoc:-1,-1,-2>'
    - '@DELVAR s $<playername>.TrapTMP'
    - '@DELVAR s $<playername>.Trap2TMP'
    - '@DELVAR s $<playername>.Trap3TMP'
    - '@DELVAR s $<playername>.Trap4TMP'
    - '@DELVAR s $<playername>.Trap5TMP'
    - '@DELVAR s $<playername>.Trap6TMP'    
    