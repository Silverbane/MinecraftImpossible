Scripts:
  Description:
    Script:
    - '@PLAYER &4WHAT IT DOES:&r A $<playername>.CurrentBuildingCategory lets you create sea charts that will allow you to travel to Port Authorities that
    are connected to your $<playername>.CurrentBuildingCategory via any waterway.'
  Help:
    Script:
    - '@PLAYER Opened $<playername>.CurrentBuildingCategory Help. Please complete the entire help file before doing anything else.'
    - '@PLAYER Category: $<playername>.CurrentBuildingCategory'
    - '@PLAYER Town: $<playername>.CurrentBuildingTown'
    - '@PLAYER Owner: $<playername>.CurrentBuildingOwner'
    - '@PLAYER Name: $<playername>.CurrentBuildingName'
    - '@CALL Shared:BowCheck'
    - '@PLAYER &4PRICES and STATUS:&r Upkeep: Current storage level at $Ledger.<var:$<playername>.CurrentBuildingID>Upkeep . Price:'
    - '@SETSTR $<playername>.Building $<playername>.CurrentBuildingCategory'
    - '@SETSTR $<playername>.Action Upkeep'
    - '@CALL Shared:PriceCheck'
    - '@CALL Shared:BowCheck'
    - '@PLAYER &cPrice to Travel:&r Takes 1 away from upkeep.'
    - '@SETSTR $<playername>.Building $<playername>.CurrentBuildingCategory'
    - '@SETSTR $<playername>.Action Travel'
    - '@CALL Shared:PriceCheck'
    - '@PLAYER Please note that if you are the owner of this $<playername>.CurrentBuildingCategory you will not have to pay to travel to your destination.
    But remember you will have to pay the owner of your destination when you need to travel back.'
    - '@CALL Shared:BowCheck'
    - '@CALL <var:$<playername>.CurrentBuildingCategory>:Description'
    - '@CALL Shared:BowCheck'
    - '@PLAYER You can make money from a $<playername>.CurrentBuildingCategory if you are the owner and others use your $<playername>.CurrentBuildingCategory to travel. 
    That money will be directly deposited to your bank.'
    - '@CALL Shared:BowCheck'
    - '@PLAYER &4HOW IT WORKS:&r'
    - '@PLAYER &cBrowse Sea Charts:&r Anyone can click on the ender portal frame with an empty hand to browse up through the sea chart selection and while holding shift to browse down.'
    - '@CALL Shared:BowCheck'
    - '@PLAYER &cTravel to Selected Sea Chart:&r Once you select a sea chart you can equip a boat and right click to set sail to the location of your selected sea chart.'
    - '@CALL Shared:BowCheck'
    - '@PLAYER When traveling a timer will appear every 30 seconds letting you know how much longer until you arrive at you destination.
    You will be able to walk around and do whatever you want while this timer is counting down, once the timer runs out you will be automatically warped to your destination.'
    - '@CALL Shared:BowCheck'    
    - '@PLAYER &cCreating Sea Charts:&r Right click on the ender portal frame with an empty map to plot out a new sea chart. 
    You will then be guided through the process of creating a sea chart.' 
    - '@CALL Shared:BowCheck' 
    - '@PLAYER As the owner you can also click the ender portal frame while having a book and quill eqiupped to see how much money this $<playername>.CurrentBuildingCategory has made you.'
    - '@PLAYER HELP ENDED'
  HelpEndPortalFrame:
    Script:
    - '@PLAYER Ender portal frame placement hint: IMPORTANT place it where people have access to it from the main water way. People have to click on this while being in a boat in water. So at the end of the dock would be a great example of a good placement.'
  Setup:
    Script:
    - '@SETSTR $<playername>.CurrentBuildingCategory PortAuthority'
    - '@IF b $<playername>.NewPlayer = True'
#    - ' @CMDOP pex group $<playername>.CurrentBuildingCategory user add <playername>'
    - ' @PLAYER &8LOG $<playername>.CurrentBuildingCategory Setup Complete&r'
    - '@ELSE'
#   TECH COST
    - '@SETINT $Price.<var:$<playername>.CurrentBuildingCategory>Tech 15'
#   TRAVEL COST
    - '@SETINT $PriceRecipient.<var:$<playername>.CurrentBuildingCategory>Travel Owner'
    - '@SETINT $Price.<var:$<playername>.CurrentBuildingCategory>Travel 2'
#   UPKEEP COST
    - '@SETINT $Price.<var:$<playername>.CurrentBuildingCategory>Upkeep 1'
    - '@SETSTR $ItemTake.<var:$<playername>.CurrentBuildingCategory>Upkeep YES'
    - '@SETINT $ItemTypeAmount.<var:$<playername>.CurrentBuildingCategory>Upkeep 1'
    - '@SETSTR $ITEMID.Bread 297'
    - '@SETSTR $ItemName.<var:$<playername>.CurrentBuildingCategory>Upkeep1 Bread'
    - '@SETINT $ItemAmount.<var:$<playername>.CurrentBuildingCategory>Upkeep1 10'
#   VERSION
    - '@IF s $Setup.<var:$<playername>.CurrentBuildingCategory>Version != 0.2a'
    - ' @SETSTR $Setup.<var:$<playername>.CurrentBuildingCategory>Version 0.2a'
    - ' @PLAYER <var:$<playername>.CurrentBuildingCategory> Version $Setup.<var:$<playername>.CurrentBuildingCategory>Version setup completed.'
    - '@ELSE'
    - ' @PLAYER <var:$<playername>.CurrentBuildingCategory> Version $Setup.<var:$<playername>.CurrentBuildingCategory>Version has already been setup.'
    - '@ENDIF'
#   FIRST TIME SETUP
    - '@IF b $Setup.<var:$<playername>.CurrentBuildingCategory> != True'
    - ' @ADDINT $Tech.ID 1'
    - ' @SETSTR $Tech.<var:$Tech.ID> $<playername>.CurrentBuildingCategory'
    - ' @PLAYER $<playername>.CurrentBuildingCategory set to Tech.<var:$Tech.ID> and first time setup has been completed.'
    - ' @SETBOOL $Setup.<var:$<playername>.CurrentBuildingCategory> True'
    - '@ELSE'
    - ' @PLAYER You have already completed the first time setup of the stoneworks. Skipping'
    - '@ENDIF'
    - '@PLAYER $<playername>.CurrentBuildingCategory Setup Completed'
    - '@DELVAR s $<playername>.CurrentBuildingCategory'
    - '@ENDIF'
  Power:
    Script:
    - '@CALL Shared:BlockCheckScript'
    - '@CALL Shared:BuildingID'
    - '@CALL Shared:Upkeep'
    - '@IF s $<playername>.BlockCheckActiveScript = Passed'
    - '@AND b $<playername>.QuickTravel != True'
    - ' @IF b $<playername>.BoatCheck = TRUE'
#    - '     @IF s $<playername>.CurrentBuildingOwner != <playername>'
    - '      @IF b $<playername>.AllowedUse != True'
    - '         @SETSTR $<playername>.Building PortAuthority'
    - '         @SETSTR $<playername>.Action Travel'
    - '         @CALL Shared:Price'
    - '     @ELSE'
    - '         @SETSTR $<playername>.Building PortAuthority'
    - '         @SETSTR $<playername>.Action Travel'
    - '         @SETBOOL b $<playername>.PriceCheck true'
    - '     @ENDIF'
    - '     @IF b $<playername>.PriceCheck = true'
    - '         @SETBOOL $<playername>.Docked true'
    - '         @EXIT'
    - '     @ENDIF'
    - ' @ENDIF'    
    - ' @IF i <itemid> = 388'
    - '     @IF b $<playername>.BoatCheck = FALSE'
#    - '         @IF s $<playername>.CurrentBuildingOwner != <playername>'
    - '         @IF b $<playername>.AllowedUse != True'
    - '             @SETSTR $<playername>.Building PortAuthority'
    - '             @SETSTR $<playername>.Action Travel'
    - '             @CALL Shared:Price'
    - '         @ELSE'
    - '             @SETSTR $<playername>.Building PortAuthority'
    - '             @SETSTR $<playername>.Action Travel'
    - '             @SETBOOL b $<playername>.PriceCheck true'
    - '         @ENDIF'
    - '         @IF b $<playername>.PriceCheck = true'
    - '             @IF i $Ledger.<var:$<playername>.CurrentBuildingID>Upkeep != 0'
    - '                 @SUBINT $Ledger.<var:$<playername>.CurrentBuildingID>Upkeep 1'
    - '             @ENDIF'
    - '             @CALL Shared:RouteCheck'
    - '             @SETSTR $<playername>.TravelType Ship'
    - '             @SETSTR $<playername>.SeaChartDestination $<playername>.<var:$<playername>.CurrentBuildingID>Return'
    - '             @SETSTR $<playername>.SeaChartDestinationName $Ledger.<var:$<playername>.SeaChartDestination>Name'
    - '             @SETSTR $<playername>.SeaChartDestinationTown $Ledger.<var:$<playername>.SeaChartDestination>Town'
    - '             @SETSTR $<playername>.SeaChartDestinationTime $Ledger.<var:$<playername>.SeaChartDestination>Time'
    - '             @PLAYER Anchor away! We have a long journey ahead and will arive at $<playername>.SeaChartDestinationTown via boarding and sailing on a $<playername>.SeaChartDestinationCategory named
    $<playername>.SeaChartDestinationName after $<playername>.SeaChartDestinationTime seconds.'
    - '             @LOOP $<playername>.SeaChartDestinationTime'
    - '                 @PAUSE 1'
    - '                 @SUBINT $<playername>.CurrentWaitTimeTotal 1'
    - '                 @ADDINT $<playername>.CurrentWaitTimeTemp 1'
    - '                 @IF i $<playername>.CurrentWaitTimeTemp = 30'
    - '                     PLAYER You have $<playername>.CurrentWaitTimeTotal seconds left of your journey until you arrive at $<playername>.SeaChartDestinationTown.'
    - '                     @SETINT $<playername>.CurrentWaitTimeTemp 0'
    - '                 @ENDIF'
    - '             @ENDLOOP'
    - '             @DELVAR i $<playername>.CurrentWaitTimeTemp'
    - '             @DELVAR i $<playername>.CurrentWaitTimeTotal'
    - '             @CMDOP warp $<playername>.<var:$<playername>.CurrentBuildingID>Return'
    - '             @PLAYER You arrived at your destination.'
    - '             @SETSTR $<playername>.TravelType Walk'
    - '             @SETBOOL $<playername>.QuickTravel False'
    - '         @ENDIF'
    - '     @ENDIF'
    - ' @ENDIF'
    - '@ELSE'
    - ' @PLAYER You are either already quick traveling somewhere else or the ender portal frame you selected needs to be charged with more 
    upkeep. Quick Travel Status: $<playername>.QuickTravel.'
    - '@ENDIF'
