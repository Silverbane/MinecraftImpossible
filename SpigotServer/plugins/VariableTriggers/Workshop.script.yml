Scripts:
  Help:
    Script:
    - '@PLAYER Opened Workshop Help.'
    - '@PLAYER &4 UNDER CONSTRUCTION'
    - '@PLAYER Closed Workshop Help.'
  Ledger:
    Script:
#    - '@SETSTR $HardWorld.<playername>ActivePlans Workshop'
    - '@SETSTR $HardWorld.<playername>CurrentTown $<playername>.SMTeam'
#    - '@ADDINT $HardWorld.<var:$<playername>.SMTeam>PopLimit 6'
    - '@PLAYER &8LOG Calling Shared:BuildingLedger'
    - '@CALL Shared:BuildingLedger'
  Menu:
    Script:
    - '@SETSTR $HardWorld.<playername>CheckType Y-1Check'
    - '@CALL Shared:BuildingID'
    - '@IF b $HardWorld.<playername>NoOwner = True'
    - '@AND b $HardWorld.<var:$<playername>.SMTeam>Building != True'
#    - ' @SETBOOL $HardWorld.<var:$<playername>.SMTeam>Building False' 
#    - ' @SETSTR $HardWorld.<playername>ActivePlans Workshop'
    - ' @SETSTR $HardWorld.<playername>CurrentTown $<playername>.SMTeam'
#    - ' @ADDINT $HardWorld.<var:$<playername>.SMTeam>PopLimit 6'
    - ' @CALL Shared:BuildingLedger'
    - '@ENDIF'
    - '@IF b $HardWorld.<playername>AllowedUse = True'
    - ' @PLAYER Opening Workshop Menu'
    - ' @OPENINV Workshop'
    - '@ENDIF'
  IEvent:
    Script:
    - '@IF s <inventorytitle> ?= Workshop'
    - ' @SWITCH i <clickedslot>'
    - '   @CASE 0'
    - '     @CALL Workshop:Help'
    - '   @CASE 1'
    - '     @SETSTR $HardWorld.<playername>CitizenSelected <var:$<playername>.SMTeam>1'
    - '     @IF b $HardWorld.<var:$<playername>.SMTeam>1Built != True'
    - '         @SETSTR $HardWorld.<playername>CitizenSelectType New'
    - '         @SETSTR $HardWorld.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $HardWorld.<playername>CitizenTeamID 1'
    - '         @PLAYER <var:$<playername>.SMTeam> 1 new citizen selected.'
    - '     @ELSE'
    - '       @IF b $HardWorld.<var:$<playername>.SMTeam>1Dead = True'
    - '         @SETSTR $HardWorld.<playername>CitizenSelectType Dead'
    - '         @SETSTR $HardWorld.<playername>CitizenTeamID $<playername>.SMTeam'
    - '         @ADDSTR $HardWorld.<playername>CitizenTeamID 1'
    - '         @PLAYER <var:$<playername>.SMTeam> 1 respawn selected.'
    - '       @ELSE'
    - '         @SETSTR $HardWorld.<playername>CitizenSelectType Taken'
    - '         @PLAYER <var:$<playername>.SMTeam> 1 slot has already been taken.'
    - '       @ENDIF'
    - '     @ENDIF'
    - ' @ENDSWITCH'
    - '@ENDIF'